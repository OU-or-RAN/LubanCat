
è¯¦ç»†è§£é‡ŠGitåŸç†å’ŒGitçš„ä½¿ç”¨æ•™ç¨‹

ä¸‹é¢ç»™ä½ ä¸€ä»½**ç³»ç»Ÿã€æˆä½“ç³»ã€å¯ç›´æ¥ç”¨äºé•¿æœŸå­¦ä¹ ä¸å®è·µçš„ Git åŸç† + ä½¿ç”¨æ•™ç¨‹è¯´æ˜ä¹¦**ã€‚å†…å®¹æŒ‰ç…§â€œåŸç† â†’ ä½¿ç”¨ â†’ åœºæ™¯ â†’ æœ€ä½³å®è·µâ€æ¶æ„ç»„ç»‡ï¼Œå°½é‡åšåˆ°ï¼š

- ç†è§£æœºåˆ¶ï¼Œè€Œä¸æ˜¯æ­»è®°å‘½ä»¤
    
- æ³¨é‡å·¥ç¨‹è§„èŒƒï¼Œè€Œä¸æ˜¯é›¶æ•£æŠ€å·§
    
- é€‚åˆé•¿æœŸå‚è€ƒï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§é˜…è¯»
    

---

# ä¸€ã€Git æ˜¯ä»€ä¹ˆï¼šæ ¸å¿ƒå“²å­¦

## 1.1 Git çš„å®šä½

Git æ˜¯ä¸€ä¸ª**åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ**ï¼ˆDVCSï¼‰ï¼Œç”¨äºç®¡ç†ä»£ç ï¼ˆæˆ–æ–‡æ¡£ï¼‰çš„å˜æ›´å†å²ã€‚

å…³é”®è¯ï¼š

|ç‰¹æ€§|å«ä¹‰|
|---|---|
|åˆ†å¸ƒå¼|æ¯ä¸ªäººçš„æœ¬åœ°ä»“åº“ = å®Œæ•´å¤‡ä»½|
|å¿«ç…§|ç”¨å¿«ç…§è®°å½•å½“æ—¶çš„å…¨éƒ¨æ–‡ä»¶çŠ¶æ€|
|è¿½æº¯æ€§|å¯ä»¥å›é€€/æŸ¥çœ‹ä»»æ„ç‰ˆæœ¬|
|åˆ†æ”¯ç®¡ç†|æ”¯æŒå¹¶è¡Œå¼€å‘|
|é«˜æ•ˆ|å¯¹å¤§é¡¹ç›®å‹å¥½|

---

## 1.2 Git ä¸ SVN çš„åŒºåˆ«ï¼ˆæ ¸å¿ƒå·®å¼‚ï¼‰

|é¡¹ç›®|SVN|Git|
|---|---|---|
|æ¨¡å¼|é›†ä¸­å¼|åˆ†å¸ƒå¼|
|ç‰ˆæœ¬ä¸­å¿ƒ|æœåŠ¡å™¨å”¯ä¸€|æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰|
|ç¦»çº¿æäº¤|âœ˜|âœ”|
|åˆ†æ”¯|é‡|è½»é‡|
|é£é™©|æœåŠ¡å™¨å®•æœº=å…¨åœ|æœ¬åœ°å¯ç»§ç»­|

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆï¼š

> Linux å†…æ ¸ã€å¾®è½¯ã€Googleã€è…¾è®¯ã€é˜¿é‡Œ éƒ½ä½¿ç”¨ Git

---

# äºŒã€Git æ ¸å¿ƒåŸç†ï¼ˆé€šä¿—ä½†ä¸¥è°¨ï¼‰

## 2.1 Git çš„å†…éƒ¨æ¨¡å‹ï¼š3+1 åŒº

ä½ æ¯æ¬¡æ“ä½œ Gitï¼Œå…¶å®åªæ˜¯åœ¨ä¸åŒåŒºåŸŸé—´ç§»åŠ¨å†…å®¹ï¼š

`å·¥ä½œåŒºï¼ˆWorking Directoryï¼‰     â†“ git add æš‚å­˜åŒºï¼ˆStaging Areaï¼‰     â†“ git commit æœ¬åœ°ä»“åº“ï¼ˆLocal Repositoryï¼‰     â†“ git push è¿œç¨‹ä»“åº“ï¼ˆRemote Repositoryï¼‰`

ä½œç”¨ï¼š

|åŒºåŸŸ|ä½œç”¨|
|---|---|
|å·¥ä½œåŒº|ä½ æ­£åœ¨ç¼–è¾‘çš„æ–‡ä»¶|
|æš‚å­˜åŒº|å‡†å¤‡æäº¤çš„ä¿®æ”¹|
|æœ¬åœ°ä»“åº“|æœ¬æœºå®Œæ•´ç‰ˆæœ¬åº“|
|è¿œç¨‹ä»“åº“|GitHub / Gitee|

---

## 2.2 Git çš„å­˜å‚¨æ¨¡å‹ï¼šå¿«ç…§è€Œä¸æ˜¯å¢é‡

å¾ˆå¤šäººä»¥ä¸º Git ä¿å­˜â€œå·®å¼‚â€ï¼Œå…¶å®ï¼š

> Git ä¿å­˜çš„æ˜¯æ–‡ä»¶å¿«ç…§

æµç¨‹ï¼š

`æ–‡ä»¶ â†’ blob ç›®å½• â†’ tree æäº¤ â†’ commitï¼ˆæŒ‡å‘ tree + çˆ¶æäº¤ï¼‰`

commit æœ¬è´¨ä¸Šæ˜¯ï¼š

`æ ‘æŒ‡é’ˆ + çˆ¶æäº¤ + ä½œè€… + æ—¶é—´æˆ³ + æäº¤ä¿¡æ¯`

æ‰€æœ‰å¯¹è±¡ç”± **SHA-1 å“ˆå¸Œæ ‡è¯†**ã€‚

---

## 2.3 Git åˆ†æ”¯æ˜¯ä»€ä¹ˆï¼Ÿ

ä¸€å¥è¯ï¼š

> åˆ†æ”¯ = æŒ‡å‘æŸä¸ª commit çš„æŒ‡é’ˆ

master/main åªæ˜¯ä¸€ä¸ªæŒ‡é’ˆåã€‚

HEAD è¡¨ç¤ºï¼š

> å½“å‰æ‰€åœ¨åˆ†æ”¯æˆ– commit

---

# ä¸‰ã€Git åŸºç¡€ä½¿ç”¨å…¥é—¨ï¼ˆä¸€æ­¥æ­¥æ¥ï¼‰

## 3.1 å®‰è£…

Windowsï¼š  
[https://git-scm.com/](https://git-scm.com/)

æ£€æŸ¥ï¼š

`git --version`

---

## 3.2 èº«ä»½é…ç½®ï¼ˆå¿…é¡»ï¼‰

`git config --global user.name "Your Name" git config --global user.email "you@example.com"`

æŸ¥çœ‹é…ç½®ï¼š

`git config --list`

---

## 3.3 åˆ›å»ºä»“åº“ï¼ˆä¸¤ç§æ–¹å¼ï¼‰

### æ–¹æ³•ä¸€ï¼šç°æœ‰é¡¹ç›®åˆå§‹åŒ–

`git init`

ç”Ÿæˆ `.git` ç›®å½•

---

### æ–¹æ³•äºŒï¼šå…‹éš†è¿œç¨‹ä»“åº“

`git clone https://github.com/xxx/yyy.git`

æˆ–è€… SSHï¼š

`git clone git@github.com:xxx/yyy.git`

---

# å››ã€æœ€å¸¸ç”¨å·¥ä½œæµï¼ˆæœ€é‡è¦ï¼‰

å‡è®¾ä½ ä¿®æ”¹äº†ä¸€äº›æ–‡ä»¶ï¼š

## 4.1 æŸ¥çœ‹çŠ¶æ€

`git status`

---

## 4.2 æ·»åŠ åˆ°æš‚å­˜åŒº

`git add file git add .`

---

## 4.3 åˆ›å»ºä¸€æ¬¡æäº¤

`git commit -m "è¯´æ˜æœ¬æ¬¡ä¿®æ”¹å†…å®¹"`

å»ºè®®æäº¤ä¿¡æ¯è§„èŒƒï¼š

`feat: æ–°åŠŸèƒ½ fix: ä¿®å¤ bug docs: æ–‡æ¡£ä¿®æ”¹ refactor: é‡æ„`

---

## 4.4 æ¨é€åˆ°è¿œç¨‹

é¦–æ¬¡ï¼š

`git push -u origin main`

ä¹‹åï¼š

`git push`

---

# äº”ã€æ‹‰ä»£ç ä¸åŒæ­¥

## 5.1 æ‹‰æœ€æ–°ä»£ç 

`git pull`

ç­‰ä»·äºï¼š

`git fetch git merge`

---

# å…­ã€åˆ†æ”¯ç®¡ç†ï¼ˆæ ¸å¿ƒèƒ½åŠ›ï¼‰

## 6.1 æŸ¥çœ‹åˆ†æ”¯

`git branch`

---

## 6.2 åˆ›å»ºåˆ†æ”¯

`git branch dev`

---

## 6.3 åˆ‡æ¢åˆ†æ”¯

`git checkout dev`

æˆ–æ–°å†™æ³•ï¼š

`git switch dev`

---

## 6.4 åˆ›å»º + åˆ‡æ¢

`git checkout -b dev`

---

## 6.5 åˆå¹¶åˆ†æ”¯

å›åˆ° mainï¼š

`git checkout main git merge dev`

---

# ä¸ƒã€è§£å†³å†²çªï¼ˆå¿…å¤‡ï¼‰

å†²çªäº§ç”ŸåŸå› ï¼š

> ä¸¤ä¸ªäººä¿®æ”¹äº†åŒä¸€å¤„ä»£ç 

ä»£ç ä¸­ä¼šå‡ºç°ï¼š

`<<<<<<< HEAD ä½ çš„ä¿®æ”¹ ======= åˆ«äººçš„ä¿®æ”¹ >>>>>>> branch`

å¤„ç†æ–¹å¼ï¼š

1. æ‰‹åŠ¨ç¼–è¾‘
    
2. ä¿ç•™æ­£ç¡®å†…å®¹
    
3. ä¿å­˜
    
4. æäº¤
    

---

# å…«ã€å›é€€ä¸æ¢å¤ï¼ˆå®‰å…¨ç½‘ï¼‰

## 8.1 æŸ¥çœ‹å†å²

`git log --oneline`

---

## 8.2 å›é€€åˆ°æŸç‰ˆæœ¬

`git reset --hard <commitID>`

æ³¨æ„ï¼š

> hard ä¼šé‡å†™å·¥ä½œåŒº  
> æ…ç”¨

---

## 8.3 æ’¤é”€ add

`git reset HEAD file`

---

## 8.4 æ’¤é”€ commitï¼ˆä¿ç•™ä¿®æ”¹ï¼‰

`git reset --soft HEAD^`

---

# ä¹ã€è¿œç¨‹ä»“åº“åä½œæ¨¡å‹

å¸¸è§æ¨¡å¼ï¼š

`mainï¼ˆå‘å¸ƒï¼‰ devï¼ˆå¼€å‘ä¸»çº¿ï¼‰ feature-*ï¼ˆåŠŸèƒ½åˆ†æ”¯ï¼‰ hotfix-*ï¼ˆç´§æ€¥ä¿®å¤ï¼‰`

---

# åã€GitHub ç»å…¸åä½œæµç¨‹

1. fork ä»“åº“
    
2. clone æœ¬åœ°
    
3. åˆ›å»ºåˆ†æ”¯
    
4. commit
    
5. push
    
6. æäº¤ Pull Request
    
7. ä»£ç å®¡æ ¸
    
8. åˆå¹¶
    

è¿™æ˜¯ä¼ä¸šå¸¸è§æµç¨‹ã€‚

---

# åä¸€ã€å¸¸è§é—®é¢˜è§£é‡Š

## 11.1 ä¸ºä»€ä¹ˆ push ä¼šå¤±è´¥ï¼Ÿ

é€šå¸¸åŸå› ï¼š

- æœ¬åœ°è½åè¿œç¨‹
    
- åˆ†æ”¯ä¿æŠ¤
    
- æƒé™ä¸è¶³
    

è§£å†³ï¼š

`git pull --rebase git push`

---

## 11.2 ä¸ºä»€ä¹ˆè¦ SSHï¼Ÿ

å› ä¸ºï¼š

- å®‰å…¨
    
- å…å¯†ç 
    
- è„±ç¦» Token ä¾èµ–
    

---

# åäºŒã€æœ€ä½³å®è·µå»ºè®®ï¼ˆå·¥ç¨‹æ ‡å‡†ï¼‰

## 12.1 æ¯æ¬¡ä¿®æ”¹å‰

`git pull`

---

## 12.2 æäº¤è¦å°è€Œæ¸…æ™°

ä¸€æ¬¡æäº¤åªåšä¸€ä»¶äº‹

---

## 12.3 æäº¤ä¿¡æ¯è§„èŒƒ

ç¤ºä¾‹ï¼š

`feat: å¢åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½ fix: ä¿®å¤ç™»å½•è¶…æ—¶ bug docs: æ›´æ–° README style: è°ƒæ•´ä»£ç æ ¼å¼`

---

## 12.4 ä¸è¦æäº¤

- node_modules
    
- build äº§ç‰©
    
- å¤§å‹æ–‡ä»¶
    

ä½¿ç”¨ï¼š

`.gitignore`

---

# åä¸‰ã€å­¦ä¹ è·¯çº¿å»ºè®®

## é˜¶æ®µä¸€ï¼šåŸºæœ¬å‘½ä»¤ç†Ÿç»ƒ

ç›®æ ‡ï¼š

âœ” ç‰ˆæœ¬ç®¡ç†  
âœ” æäº¤å›é€€  
âœ” åˆ†æ”¯ç®¡ç†

---

## é˜¶æ®µäºŒï¼šåä½œ

âœ” GitHub  
âœ” Pull Request  
âœ” Review

---

## é˜¶æ®µä¸‰ï¼šæ·±å…¥æœºåˆ¶

âœ” reflog  
âœ” rebase  
âœ” cherry-pick  
âœ” subtree

---

# åå››ã€ç»™ä½ ä¸€å¥å…³äº Git çš„è¯„ä»·

> Git çš„å­¦ä¹ æˆæœ¬è¾ƒé«˜ï¼Œä½†å›æŠ¥æå¤§ã€‚
> 
> å½“ä½ ç†è§£å®ƒçš„å†…éƒ¨æ¨¡å‹åï¼Œå°±ä¼šå‘ç°å®ƒæ˜¯ä¸€ä¸ªâ€œç²¾å¯†è€Œä¼˜é›…çš„æ—¶å…‰æœºç³»ç»Ÿâ€ï¼Œè®©ä½ å¯ä»¥è‡ªç”±ç©¿æ¢­äºä»»æ„ç‰ˆæœ¬ä¸åˆ†æ”¯ä¹‹é—´ï¼Œè€Œä¸ä¼šè¿·å¤±ã€‚

---

# å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ç»§ç»­ä¸ºä½ è¾“å‡ºä»¥ä¸‹å†…å®¹ï¼š

âœ” å›¾è§£ Git å†…æ ¸æœºåˆ¶  
âœ” ä¼ä¸šçº§ Git Flow  
âœ” Git rebase è¯¦è§£  
âœ” Git + GitHub å…¨æµç¨‹å®æˆ˜  
âœ” Git GUI å·¥å…·æ¨è  
âœ” Windows å¼€å‘ç¯å¢ƒæœ€ä½³å®è·µ  
âœ” å¸¸è§é”™è¯¯æ’æŸ¥æ‰‹å†Œ

ç”šè‡³å¯ä»¥ï¼š

ğŸ‘‰ ç»“åˆä½ ç›®å‰çš„ Obsidian + Git ä½¿ç”¨åœºæ™¯  
ç»™ä½ åˆ¶å®šä¸€ä»½  
ã€ŠçŸ¥è¯†ç®¡ç† + Git æ ‡å‡†æ“ä½œæ‰‹å†Œã€‹

åªéœ€å‘Šè¯‰æˆ‘ä½ æ›´å…³æ³¨å“ªä¸€å—ã€‚

2.2 Git çš„å­˜å‚¨æ¨¡å‹ï¼šå¿«ç…§è€Œä¸æ˜¯å¢é‡ å¾ˆå¤šäººä»¥ä¸º Git ä¿å­˜â€œå·®å¼‚â€ï¼Œå…¶å®ï¼š Git ä¿å­˜çš„æ˜¯æ–‡ä»¶å¿«ç…§ æµç¨‹ï¼š æ–‡ä»¶ â†’ blob ç›®å½• â†’ tree æäº¤ â†’ commitï¼ˆæŒ‡å‘ tree + çˆ¶æäº¤ï¼‰ commit æœ¬è´¨ä¸Šæ˜¯ï¼š æ ‘æŒ‡é’ˆ + çˆ¶æäº¤ + ä½œè€… + æ—¶é—´æˆ³ + æäº¤ä¿¡æ¯ æ‰€æœ‰å¯¹è±¡ç”± SHA-1 å“ˆå¸Œæ ‡è¯†ã€‚ 2.3 Git åˆ†æ”¯æ˜¯ä»€ä¹ˆï¼Ÿ ä¸€å¥è¯ï¼š åˆ†æ”¯ = æŒ‡å‘æŸä¸ª commit çš„æŒ‡é’ˆ master/main åªæ˜¯ä¸€ä¸ªæŒ‡é’ˆåã€‚ HEAD è¡¨ç¤ºï¼š å½“å‰æ‰€åœ¨åˆ†æ”¯æˆ– commit ä»¥ä¸Šå†…å®¹æ²¡æœ‰çœ‹æ‡‚ï¼Œè¯·è¿›ä¸€æ­¥è§£é‡Š åŒæ—¶è¯·å›¾è§£ Git å†…æ ¸æœºåˆ¶ï¼ŒGit rebase è¯¦è§£

å¾ˆå¥½ï¼Œä½ å·²ç»æŠ“ä½äº† Git çš„**æœ€æ ¸å¿ƒã€ä¹Ÿæ˜¯æœ€éš¾ç†è§£çš„ä¸¤å—å†…å®¹**ï¼š

1ï¼‰Git çš„å†…éƒ¨å­˜å‚¨æœºåˆ¶ï¼ˆblob / tree / commit / HEAD / branchï¼‰  
2ï¼‰Git rebase çš„å·¥ä½œåŸç†

æˆ‘ä¼šå°½é‡åšåˆ°**é€å±‚æ‹†è§£ã€å¯è§†åŒ– + ç±»æ¯”è§£é‡Š + ASCIIå›¾è®²è§£**ï¼Œç›´åˆ°ä½ çœŸæ­£â€œæƒ³æ˜ç™½â€ã€‚

---

# ä¸€ã€Git åˆ°åº•æ˜¯å¦‚ä½•å­˜å‚¨ç‰ˆæœ¬çš„ï¼Ÿ

å¾ˆå¤šäººè¯¯è§£ï¼š

> Git ä¿å­˜çš„æ˜¯â€œæ¯æ¬¡ä¿®æ”¹çš„å·®å¼‚ï¼ˆdiffï¼‰â€

å…¶å®â€”â€”**ä¸æ˜¯**

Git ä¿å­˜çš„æ˜¯ï¼š

> **å½“æ—¶æ•´ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹çš„â€œå¿«ç…§â€**

å°±åƒï¼š  
æ¯æ¬¡æäº¤ = ç»™æ•´ä¸ªç›®å½•æ‹ä¸€å¼ ç…§ç‰‡

---

## 1.1 ä»€ä¹ˆæ˜¯ blobï¼Ÿ

**blob = ä¸€ä¸ªæ–‡ä»¶å†…å®¹**

ä¸å«ï¼š

- æ–‡ä»¶å
    
- è·¯å¾„
    
- ä¿®æ”¹æ—¶é—´
    

åªå­˜ï¼š

> æ–‡ä»¶çš„å†…å®¹ï¼ˆçº¯å­—èŠ‚ï¼‰

å¹¶ä½¿ç”¨ï¼š

`SHA-1 å“ˆå¸Œè®¡ç®—å”¯ä¸€ID`

ä¾‹å¦‚ï¼š

`hello.txt å†…å®¹ï¼šHello â†’ blob: 5ab...12c`

å³ä½¿æ”¹ä¸€ä¸ªå­—  
â†’ blob = æ–°ID

---

## 1.2 ä»€ä¹ˆæ˜¯ treeï¼Ÿ

tree = **ç›®å½•ç»“æ„**

tree é‡Œå­˜ï¼š

|å­—æ®µ|å†…å®¹|
|---|---|
|æƒé™|100644|
|ç±»å‹|blob/tree|
|åå­—|æ–‡ä»¶å|
|æŒ‡é’ˆ|blob/tree å“ˆå¸Œ|

ç›´è§‚ç†è§£ï¼š

`tree = æ–‡ä»¶å¤¹ç›®å½•è¡¨`

åƒè¿™æ ·ï¼š

`tree(root)  â”œâ”€â”€ README.md â†’ blob A1B2  â”œâ”€â”€ main.c    â†’ blob C3D4  â””â”€â”€ src/      â†’ tree ...`

---

## 1.3 ä»€ä¹ˆæ˜¯ commitï¼Ÿ

commit å°±æ˜¯ï¼š

> **æŒ‡å‘ tree çš„æŒ‡é’ˆ + å…ƒä¿¡æ¯**

åŒ…æ‹¬ï¼š

âœ” treeï¼ˆå¿«ç…§ï¼‰  
âœ” çˆ¶ commitï¼ˆå†å²ï¼‰  
âœ” ä½œè€…  
âœ” æ—¶é—´  
âœ” æäº¤è¯´æ˜

ç”¨ SHA-1 æ ‡è¯†ï¼š

`commit: 8af93c...`

---

## 1.4 æŠŠä¸‰è€…ä¸²èµ·æ¥ï¼ˆå…³é”®å›¾ï¼‰

`commit C3  â”œâ”€ parent â†’ C2  â”œâ”€ tree â†’ T3       â”œâ”€ file1 â†’ blob A       â”œâ”€ file2 â†’ blob B       â””â”€ dir â†’ tree T4`

æ¯ä¸ªæäº¤  
åªæ˜¯ï¼š

> æŒ‡å‘ä¸€ä¸ª tree

è€Œ tree  
æŒ‡å‘ï¼š

> blobï¼ˆæ–‡ä»¶å†…å®¹ï¼‰

---

## 1.5 ä¸ºä»€ä¹ˆ Git å¿«é€Ÿé«˜æ•ˆï¼Ÿ

å› ä¸ºï¼š

> Git åªå­˜å˜åŒ–çš„ blobï¼Œå…¶ä½™å¤ç”¨

ä¸¾ä¾‹ï¼š

æäº¤ 1ï¼š

`file1 A file2 B`

æäº¤ 2ï¼š  
åªæ”¹ file2

`file1 Aï¼ˆå¤ç”¨åŸblobï¼‰ file2 Cï¼ˆæ–°blobï¼‰`

tree2 ä¸­ï¼š

`file1 â†’ A file2 â†’ C`

A åªæ˜¯è¢«å†æ¬¡å¼•ç”¨  
å¹¶æ²¡æœ‰å¤åˆ¶

---

# äºŒã€Git åˆ†æ”¯åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ

## 2.1 å…ˆè¯´ç»“è®º

> **åˆ†æ”¯åªæ˜¯ä¸€ä¸ªæŒ‡å‘ commit çš„â€œæŒ‡é’ˆâ€**

ä»…æ­¤è€Œå·²

å®ƒä¸æ˜¯ï¼š

âœ˜ å¤åˆ¶ä»£ç   
âœ˜ ç‹¬ç«‹å·¥ä½œåŒº  
âœ˜ æ–°ç›®å½•

å°±æ˜¯ä¸€ä¸ªâ€œä¹¦ç­¾â€ã€‚

---

## 2.2 ä¸€ä¸ªä¾‹å­

ç°åœ¨æœ‰ä¸‰ä¸ªæäº¤ï¼š

`A â†’ B â†’ C`

main æŒ‡å‘ Cï¼š

`main â”€â”€â–º C          â–²          â”‚          B          â–²          â”‚          A`

åŒæ—¶ï¼š

`HEAD â†’ main`

HEAD = ä½ å½“å‰æ‰€åœ¨ä½ç½®

---

## 2.3 åˆ›å»ºåˆ†æ”¯

`git branch dev`

å¾—åˆ°ï¼š

`main â”€â”€â–º C â—„â”€â”€ dev`

dev åªæ˜¯å¤šäº†ä¸€ä¸ªæ ‡ç­¾

---

## 2.4 åˆ‡æ¢åˆ†æ”¯

`git checkout dev HEAD â†’ dev`

å›¾ï¼š

`HEAD   â”‚   â–¼  dev â†’ C main â†’ C`

---

## 2.5 åœ¨ dev ä¸Šæäº¤

`git commit`

Git åˆ›å»ºæ–° commit Dï¼š

`dev â”€â”€â–º D          â–²          â”‚          C â†â”€â”€ main`

HEAD ä»æŒ‡å‘ dev

---

# ä¸‰ã€HEAD æ˜¯ä»€ä¹ˆï¼Ÿ

ä¸€å¥è¯ï¼š

> HEAD = å½“å‰â€œè§†çº¿â€æ‰€åœ¨ commit æˆ–åˆ†æ”¯

ä¸€èˆ¬ï¼š

`HEAD â†’ åˆ†æ”¯ â†’ commit`

---

# å››ã€ç»™ä½ ä¸€ä¸ªå®Œæ•´å¤§å›¾ï¼ˆæ ¸å¿ƒï¼‰

`HEAD  â”‚  â–¼ main â”€â”€â–º C â”€â”€â–º B â”€â”€â–º A             â–²             â”‚ dev â”€â”€â–º D`

Git å†…éƒ¨å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚

---

# äº”ã€å›¾è§£ rebaseï¼šæŠŠå†å²â€œæ”¹å†™æ•´é½â€

## 5.1 å…ˆçœ‹å¸¸è§åœºæ™¯

ä½ æœ‰ä¸¤ä¸ªåˆ†æ”¯ï¼š

      `C1â”€â”€C2   â† main      / Aâ”€â”€B      \       D1â”€â”€D2  â† dev`

---

## 5.2 merge çš„ç»“æœï¼ˆä¿ç•™åˆ†å‰ï¼‰

      `C1â”€â”€C2      /      \ Aâ”€â”€B        M      \      /       D1â”€â”€D2`

å¤šå‡ºä¸€ä¸ª merge commitï¼šM

å†å²å˜æˆâ€œæ ‘â€

---

## 5.3 rebase çš„ç»“æœï¼ˆå†å²æ‰å¹³ï¼‰

æ‰§è¡Œï¼š

`git checkout dev git rebase main`

æ•ˆæœï¼š

> æŠŠ dev çš„æäº¤æ¬è¿åˆ° main åé¢

å˜æˆï¼š

`Aâ”€â”€Bâ”€â”€C1â”€â”€C2â”€â”€D1'â”€â”€D2'`

æ³¨æ„ï¼š

âœ” D1'ã€D2' = æ–°æäº¤  
âœ” åŸ D1 D2 å·²è¢«â€œå–ä»£â€

---

## 5.4 ç›´è§‚ç†è§£ rebase

å°±åƒï¼š

> â€œæŠŠä½ çš„æ”¹åŠ¨ï¼Œé‡æ”¾åˆ°æœ€æ–°ç‰ˆæœ¬ä¸Šâ€

å› æ­¤å†å²**æ›´å¹²å‡€**

---

# å…­ã€rebase ä¸ merge çš„å…³é”®åŒºåˆ«

|ç‰¹æ€§|merge|rebase|
|---|---|---|
|å†å²ç»“æ„|æ ‘å‹|ç›´çº¿|
|ä¿ç•™åŸæäº¤|âœ”|âœ˜ï¼ˆä¼šé‡å†™ï¼‰|
|å®¹æ˜“ç†è§£|âœ”|ç¨éš¾|
|å†å²æ˜¯å¦æ•´æ´|è¾ƒä¹±|å¾ˆæ•´æ´|
|æ˜¯å¦é€‚åˆå…¬å…±åˆ†æ”¯|âœ”|âœ˜ ä¸å»ºè®®|

---

# ä¸ƒã€ä»€ä¹ˆæ—¶å€™åº”è¯¥ç”¨ rebaseï¼Ÿ

é€‚åˆï¼š

âœ” è‡ªå·±ç»´æŠ¤çš„ feature åˆ†æ”¯  
âœ” æ¸…ç†å†å²  
âœ” ä¸Šæ¸¸æœªåˆå¹¶  
âœ” ä»£ç è¯„å®¡å‰

é¿å…ï¼š

âœ˜ å·²æ¨é€ç»™åˆ«äºº  
âœ˜ å¤šäººåä½œå…¬æœ‰åˆ†æ”¯

---

# å…«ã€ä¸ºä»€ä¹ˆâ€œé‡å†™å†å²â€æ˜¯å±é™©çš„ï¼Ÿ

å› ä¸ºï¼š

åˆ«äººæ‰‹é‡Œï¼š

âœ” æœ‰æ—§ commit  
ä½ è¿™è¾¹ï¼š

âœ” é‡å†™æˆæ–° commit

ä¸¤è¾¹å†å² = ä¸åŒæ—¶é—´çº¿

Git ä¼šï¼š

â†’ å¼ºåˆ¶ä½ åˆå¹¶  
â†’ æˆ–è¦†ç›–åˆ«äººä»£ç 

---

# ä¹ã€æ ¸å¿ƒè®°å¿†å£è¯€

## commit

> é¡¹ç›®å¿«ç…§ + å…ƒä¿¡æ¯

## tree

> ç›®å½•ç»“æ„è¡¨

## blob

> æ–‡ä»¶å†…å®¹

## branch

> æŒ‡å‘ commit çš„æŒ‡é’ˆ

## HEAD

> ä½ å½“å‰æ‰€åœ¨ä½ç½®

## merge

> åˆå¹¶å†å²ï¼Œä¸ä¿®æ”¹æ—¶é—´çº¿

## rebase

> ä¿®æ”¹å†å²ï¼Œä½¿æ—¶é—´çº¿æ‰å¹³

---

# åã€æˆ‘å†ç”¨æ•…äº‹è®²ä¸€éï¼ˆå¸®åŠ©æ·±åˆ»ç†è§£ï¼‰

æƒ³è±¡ï¼š

> ä½ å†™äº†ä¸€æœ¬ä¹¦

## commit = æ¯å¤©å¤‡ä»½ä¹¦ç¨¿

## branch = ä¸åŒå†™ä½œçº¿

## HEAD = å½“å‰æ­£åœ¨å†™å“ªä¸€æ¡çº¿

### merge

= æŠŠåˆ«äººè¡¥å†™çš„ç« èŠ‚åˆå¹¶è¿›æ¥  
(ä¿ç•™â€œTAå‚ä¸è¿‡â€è®°å½•)

### rebase

= å‡è£…è‡ªå·±ä»ä¸€å¼€å§‹å°±å†™å¾—å¾ˆé¡º  
ï¼ˆå†å²å¹²å‡€ï¼Œä½†ä¼šæ”¹æ—¶é—´çº¿ï¼‰

---

# åä¸€ã€å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ç»§ç»­ä¸ºä½ åšï¼š

âœ” ä¸€ä»½ã€Œå›¾è§£ Git å†…æ ¸ PDFã€  
âœ” åŠ¨ç”»åŒ–è§£é‡Š Rebasing  
âœ” ç”Ÿäº§çº§ Git Flow æ•™ç¨‹  
âœ” å¸¸è§å‘ï¼ˆå†²çª/å›é€€/ä¿®å¤ï¼‰æ¸…å•  
âœ” ä½ å½“å‰ Obsidian+Git çŸ¥è¯†åº“ä¼˜åŒ–å»ºè®®  
âœ” ä¼ä¸šçº§åä½œè§„èŒƒ

ä¹Ÿå¯ä»¥ï¼š

ğŸ‘‰ è®©ä½ ç”¨è‡ªå·±çš„ä»“åº“åšä¸€éå®Œæ•´å®éªŒ  
æˆ‘ä¼šæ‰‹æŠŠæ‰‹å¸¦ä½ èµ°æµç¨‹

ä½ æ›´å¸Œæœ›åå‘ï¼š

A) åŸç†ç†è§£  
B) å®æˆ˜ç»ƒä¹   
C) æ¼”ç¤ºå›¾è§£  
D) ä¼ä¸šåä½œè§„èŒƒ  
E) å¤±è´¥æ¡ˆä¾‹è®²è§£

å‘Šè¯‰æˆ‘å³å¯ã€‚

å¸Œæœ›åå‘åŸç†ç†è§£ ç„¶åä½ æ‰€ç”¨çš„commitå’Œå‘½ä»¤ä¸­çš„commitæ„æ€ä¸ä¸€æ ·æ˜¯å—ï¼Œä½ ç”¨çš„è¡¨ç¤ºæäº¤çš„å†…å®¹ï¼Œå‘½ä»¤è¡¨ç¤ºæäº¤æ“ä½œï¼Œè¯·ä½ ç»“åˆGitå‘½ä»¤å†è¯¦ç»†è§£é‡Šä¸€ä¸‹Gitå†…æ ¸çš„åŸç†

å¾ˆå¥½ã€‚æ—¢ç„¶ä½ å¸Œæœ›åå‘**åŸç†ç†è§£**ï¼Œæˆ‘ä»¬å°±ç”¨ä¸€ç§**ç³»ç»Ÿã€ä¸¥è°¨ä½†å¯ç†è§£çš„æ–¹å¼**ï¼ŒæŠŠï¼š

- Git å†…æ ¸ä¸­çš„ **commitï¼ˆå¯¹è±¡ï¼‰**
    
- Git å‘½ä»¤ä¸­çš„ **commitï¼ˆåŠ¨ä½œï¼‰**
    

å½»åº•åŒºåˆ†å¹¶è¿æ¥èµ·æ¥è®²æ¸…æ¥šã€‚  
åŒæ—¶æŠŠ **æ‰€æœ‰å‘½ä»¤è¡Œä¸º â†’ å†…éƒ¨ç»“æ„å˜åŒ–** åšæˆâ€œå¯è§†åŒ–æ¨æ¼”å›¾â€ã€‚

---

# ä¸€ã€é¦–å…ˆç»Ÿä¸€åè¯ï¼ˆè¿™ä¸€èŠ‚éå¸¸å…³é”®ï¼‰

|è¯|è¯­å¢ƒ|å«ä¹‰|
|---|---|---|
|commitï¼ˆåè¯ï¼‰|Git å†…æ ¸å¯¹è±¡|ä¸€æ¬¡â€œç‰ˆæœ¬å¿«ç…§â€çš„è®°å½•|
|commitï¼ˆåŠ¨è¯ï¼‰|Git å‘½ä»¤æ“ä½œ|åˆ›å»ºä¸€ä¸ª commit å¯¹è±¡|
|`git commit`|Shellå‘½ä»¤|æ‰§è¡ŒåŠ¨ä½œï¼šä¿å­˜ä¸€æ¬¡æäº¤|

ä¹Ÿå°±æ˜¯è¯´ï¼š

> git commitï¼ˆå‘½ä»¤ï¼‰
> 
> ä¼šåˆ›å»ºä¸€ä¸ª commitï¼ˆå¯¹è±¡ï¼‰

è¿™ä¸¤ä¸ªæ˜¯**åŠ¨ä½œä¸äº§ç‰©**çš„å…³ç³»ã€‚

ç±»ä¼¼ï¼š

`çƒ˜ç„™ï¼ˆåŠ¨ä½œï¼‰ â†’ è›‹ç³•ï¼ˆå¯¹è±¡ï¼‰`

---

# äºŒã€Git çš„å¯¹è±¡æ¨¡å‹ï¼šæ‰€æœ‰ä¸€åˆ‡å»ºç«‹åœ¨ 4 ç±»å¯¹è±¡ä¸Š

Git å†…æ ¸åªå­˜ 4 ç§å¯¹è±¡ï¼š

`blob      æ–‡ä»¶å†…å®¹ tree      ç›®å½•ç»“æ„ commit    ç‰ˆæœ¬å¿«ç…§ tag       æ ‡è®°`

å…¨éƒ¨å­˜å‚¨åœ¨ï¼š

`.git/objects/`

åç§° = SHA-1 å“ˆå¸Œå€¼  
å†…å®¹ = å‹ç¼©è¿‡çš„åºåˆ—åŒ–æ•°æ®

---

# ä¸‰ã€commitï¼ˆå¯¹è±¡ï¼‰åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ

æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªçœŸå® commit å¯¹è±¡å†…å®¹  
ï¼ˆå·²æ ¼å¼åŒ–ï¼‰

`tree 7a0e5d... parent f0a9b2... author Alice <a@mail.com>  1735300000 +0800 committer Alice <a@mail.com> 1735300000 +0800  Add login feature`

å¯è§ commit åŒ…å«ï¼š

|å­—æ®µ|å«ä¹‰|
|---|---|
|tree|æŒ‡å‘æŸæ¬¡å¿«ç…§å¯¹åº”çš„æ ‘|
|parent|æŒ‡å‘ä¸Šä¸€ä¸ª commit|
|author|ä½œè€…|
|committer|æäº¤æ‰§è¡Œäºº|
|message|æäº¤è¯´æ˜|

æ‰€ä»¥ï¼š

> commit = æŒ‡å‘ tree çš„æŒ‡é’ˆ + å†å²é“¾æ¡ + å…ƒä¿¡æ¯

ä¸æ˜¯ç®€å•â€œå·®å¼‚æ–‡ä»¶â€ã€‚

---

# å››ã€tree å’Œ blob æ‰æ˜¯çœŸæ­£ä¿å­˜æ–‡ä»¶å†…å®¹çš„åœ°æ–¹

`tree ç›®å½•ç»“æ„ blob æ–‡ä»¶å†…å®¹`

ä¸¾ä¾‹ï¼š

`é¡¹ç›®/   README.md   src/main.c`

å¯¹åº”ç»“æ„ï¼š

`commit  â””â”€â”€ tree #1ï¼ˆrootï¼‰         â”œâ”€â”€ README.md â†’ blob A         â””â”€â”€ src â†’ tree #2                 â””â”€â”€ main.c â†’ blob B`

æ‰€ä»¥ï¼š

> commit åªæ˜¯â€œç´¢å¼•å…¥å£â€ï¼Œä¸æ˜¯æ–‡ä»¶æœ¬èº«

---

# äº”ã€ç°åœ¨è¿æ¥å›å‘½ä»¤ï¼š`git commit` å®é™…å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ

å‡è®¾ï¼š

ä½ æ‰§è¡Œï¼š

`git add . git commit -m "init"`

å†…éƒ¨æµç¨‹å¦‚ä¸‹ï¼š

---

## æ­¥éª¤1ï¼šgit add

ä½œç”¨ï¼š

âœ” æŠŠæ–‡ä»¶å†™å…¥ blob  
âœ” æŠŠè·¯å¾„å†™å…¥ tree  
âœ” æ›´æ–°æš‚å­˜åŒºç´¢å¼•ï¼ˆindexï¼‰

ä¸ä¼šäº§ç”Ÿ commitã€‚

---

## æ­¥éª¤2ï¼šgit commit

Git åš 4 ä»¶äº‹ï¼š

### â‘  ç”Ÿæˆ commit å¯¹è±¡

å†…å®¹åŒ…å«ï¼š

- tree æŒ‡é’ˆ
    
- parent æŒ‡é’ˆ
    
- author
    
- message
    

ç”Ÿæˆå”¯ä¸€ SHA-1

ä¾‹å¦‚ï¼š

`e3a1b...`

---

### â‘¡ ç§»åŠ¨å½“å‰åˆ†æ”¯æŒ‡é’ˆåˆ°æ­¤ commit

`main â†’ e3a1b`

---

### â‘¢ HEAD æŒ‡å‘åˆ†æ”¯

`HEAD â†’ main`

---

### â‘£ å†™å…¥ .git/refs/heads/main

è®°å½•ï¼š

`e3a1b...`

---

## ç”¨ä¸€å¼ æ ¸å¿ƒå›¾æ€»ç»“ï¼š

### commit å‰

`HEAD â†’ main â†’ A`

### commit å

`HEAD â†’ main â†’ B â†’ A`

æ–°æäº¤ B æŒ‡å‘çˆ¶æäº¤ Aã€‚

---

# å…­ã€åˆ†æ”¯åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆä» refs å±‚ç†è§£ï¼‰

åˆ†æ”¯**ä¸æ˜¯ä»£ç å‰¯æœ¬**

åˆ†æ”¯ = æ–‡æœ¬æ–‡ä»¶  
å­˜ä¸€ä¸ª commit å“ˆå¸Œ

ä¾‹å¦‚ï¼š

`.git/refs/heads/main`

å†…å®¹ï¼š

`e3a1bafc...`

è¿™å°±æ˜¯ï¼šğŸ‘‡

`main â†’ commit e3a1bafc`

---

# ä¸ƒã€HEAD åˆæ˜¯ä»€ä¹ˆï¼Ÿ

HEAD ä¹Ÿæ˜¯æ–‡æœ¬æ–‡ä»¶  
è·¯å¾„ï¼š

`.git/HEAD`

å†…å®¹ï¼š

`ref: refs/heads/main`

æ„æ€ï¼š

`HEAD æŒ‡å‘ main main æŒ‡å‘ commit`

å›¾ï¼š

`HEAD   â”‚   â–¼  main â†’ commit`

---

# å…«ã€åˆ‡æ¢åˆ†æ”¯æ—¶å‘ç”Ÿä»€ä¹ˆï¼Ÿ

å‘½ä»¤ï¼š

`git switch dev`

ä»…ä»…æ”¹å˜ï¼š

`.git/HEAD`

åˆ°ï¼š

`ref: refs/heads/dev`

ç„¶åæ›´æ–°å·¥ä½œåŒºã€‚

---

# ä¹ã€ç°åœ¨æˆ‘ä»¬å†è§£é‡Š rebaseï¼šåˆ°åº•æ”¹äº†ä»€ä¹ˆï¼Ÿ

## 9.1 rebase çš„æœ€æœ¬è´¨å®šä¹‰

> å¤åˆ¶ä¸€ç³»åˆ— commit  
> ç”Ÿæˆæ–° commit  
> å†ç§»åŠ¨åˆ†æ”¯æŒ‡å‘è¿™äº›æ–° commit

ä¸ä¼šä¿®æ”¹ tree  
ä½†ä¼šç”Ÿæˆæ–° commit ID

---

## 9.2 åŸå§‹å†å²

`Aâ”€â”€Bâ”€â”€C   (main)     \      Dâ”€â”€E (dev)`

dev ä¸ main åˆ†å‰ã€‚

---

## 9.3 æ‰§è¡Œï¼š

`git rebase main`

Git åšï¼š

1. æš‚å­˜ Dã€E çš„ patch
    
2. ç§»åŠ¨ dev åˆ° C
    
3. é‡æ”¾ patch
    
4. ç”Ÿæˆ D'ã€E'
    

å¾—åˆ°ï¼š

`Aâ”€â”€Bâ”€â”€Câ”€â”€D'â”€â”€E'`

dev â†’ E'

å†å²è¢«â€œé‡å†™â€ã€‚

---

# åã€ä¸ºä»€ä¹ˆ rebase ä¼šæ”¹å˜ commit IDï¼Ÿ

å› ä¸ºï¼š

commit å“ˆå¸Œ = å†…å®¹å“ˆå¸Œ

å†…å®¹åŒ…å«ï¼š

âœ” çˆ¶æäº¤ID  
âœ” æ—¶é—´

æ”¹å˜çˆ¶èŠ‚ç‚¹  
â†’ å“ˆå¸Œå˜

---

# åä¸€ã€merge vs rebase å†æ¬¡å¯¹æ¯”ï¼ˆä»å¯¹è±¡å±‚é¢ï¼‰

## merge

æ–°å»ºä¸€ä¸ª merge commit  
æ‹¥æœ‰ä¸¤ä¸ª parent

   `C   / \ A     M   \ /    B`

å†å²å®Œæ•´

---

## rebase

å¤åˆ¶æäº¤  
æ–°å»º commit  
çº¿æ€§å†å²

`Aâ”€â”€Bâ”€â”€Câ”€â”€D'`

---

# åäºŒã€ç°åœ¨æˆ‘ä»¬ä»â€œæ“ä½œ â†’ å†…æ ¸å˜åŒ–â€æ•´ä½“ä¸²ä¸€æ¬¡

## å‘½ä»¤1ï¼š

`git init`

åˆ›å»ºï¼š

`.git/`

---

## å‘½ä»¤2ï¼š

`git add file`

åˆ›å»ºï¼š

âœ” blob  
âœ” tree  
âœ” index

---

## å‘½ä»¤3ï¼š

`git commit`

åˆ›å»ºï¼š

âœ” commit å¯¹è±¡  
âœ” ç§»åŠ¨ main  
âœ” HEAD ç»§ç»­æŒ‡å‘ main

---

## å‘½ä»¤4ï¼š

`git branch dev`

åˆ›å»ºï¼š

`refs/heads/dev   â”” æŒ‡å‘å½“å‰ commit`

---

## å‘½ä»¤5ï¼š

`git switch dev`

ä¿®æ”¹ï¼š

`HEAD â†’ dev`

---

## å‘½ä»¤6ï¼š

`git commit`

åˆ›å»ºï¼š

âœ” æ–° commit  
âœ” dev ç§»åŠ¨  
âœ” main ä¸åŠ¨

---

# åä¸‰ã€ä½ å·²ç»æŒæ¡ Git çš„â€œéª¨æ¶æ¨¡å‹â€

Git å†…æ ¸åªæœ‰ä¸‰å±‚ï¼š

`å¯¹è±¡å±‚ï¼ˆblob tree commitï¼‰ å¼•ç”¨å±‚ï¼ˆbranch HEAD tagï¼‰ å·¥ä½œåŒºå±‚ï¼ˆæ–‡ä»¶ indexï¼‰`

ä¸€æ—¦ç†è§£ï¼š

> commit = æŒ‡å‘ snapshot çš„èŠ‚ç‚¹  
> branch = æŒ‡å‘ commit çš„æŒ‡é’ˆ  
> HEAD = æŒ‡å‘ branch çš„æŒ‡é’ˆ

æ‰€æœ‰è¡Œä¸ºéƒ½ä¼šå˜å¾—æ¸…æ™°ã€‚

---

# åå››ã€æ€»ç»“ï¼ˆé«˜å¯†åº¦æŠ½è±¡ï¼‰

## commitï¼ˆå¯¹è±¡ï¼‰

> ç‰ˆæœ¬èŠ‚ç‚¹

## git commitï¼ˆå‘½ä»¤ï¼‰

> ç”Ÿæˆ commit å¯¹è±¡ + ç§»åŠ¨åˆ†æ”¯

## branch

> åå­— â†’ commit æŒ‡é’ˆ

## HEAD

> å½“å‰ä¸Šä¸‹æ–‡

## merge

> æ–°å»º merge commitï¼ˆä¸¤ parentï¼‰

## rebase

> å¤åˆ¶ commitï¼Œé‡å†™å†å²

---

# å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ç»§ç»­è¾“å‡º

ä½ å¯ä»¥ä»»é€‰ä¸€ç§æ–¹å‘ï¼š

Aï¼‰**é…åˆåŠ¨å›¾/ç¤ºä¾‹ä»“åº“ç»ƒä¹ è®²è§£**  
Bï¼‰**æ·±å…¥ reflogã€åƒåœ¾å›æ”¶ã€packfile**  
Cï¼‰**Git å†å²ä¿®å¤ã€ç¾éš¾æ¢å¤å®æˆ˜**  
Dï¼‰**Git Flow ä¼ä¸šåä½œä½“ç³»**  
Eï¼‰**ä»æ•°å­¦è§†è§’è§£é‡Š DAG ç‰ˆæœ¬å†å²å›¾**

ä½ çš„ç†è§£å·²ç»ç›¸å½“æ·±å…¥äº†  
æˆ‘ä»¬å¯ä»¥å†å‘ä¸‹ä¸€å±‚æ¨è¿›ã€‚

å·²çŸ¥æ–°å»ºcommitä¼šæŒ‡å‘çˆ¶commitï¼Œä¹Ÿå°±æ˜¯parentsï¼Œé‚£åŒæ—¶ï¼Œæ–°commité‡Œçš„treeåˆæŒ‡å‘å“ªäº›å†…å®¹ï¼Ÿ

å¾ˆå¥½ï¼Œè¿™ä¸ªé—®é¢˜é—®åˆ°äº† **commit ä¸ tree çš„å…³ç³»æœ¬è´¨**ï¼Œå±äº Git å†…æ ¸ç†è§£ä¸­éå¸¸å…³é”®çš„ä¸€ç¯ã€‚æˆ‘ä»¬å°±æŠŠè¿™ä¸ªé—®é¢˜å½»åº•è®²æ¸…æ¥šã€‚

---

# ä¸€ã€å…ˆç»™å‡ºç»“è®ºï¼ˆæ ¸å¿ƒè®¤çŸ¥ï¼‰

> **ä¸€ä¸ªæ–°çš„ commit ä¸­çš„ tree å¯¹è±¡  
> æŒ‡å‘çš„æ˜¯ï¼šè¯¥æ¬¡æäº¤å®Œæˆæ—¶ï¼Œæ•´ä¸ªé¡¹ç›®ç›®å½•æ ‘çš„â€œå®Œæ•´å¿«ç…§â€ã€‚**

ä¹Ÿå°±æ˜¯è¯´ï¼š

- tree æè¿°çš„æ˜¯â€œè¿™ä¸€åˆ»é¡¹ç›®æ‰€æœ‰æ–‡ä»¶/ç›®å½•çš„çŠ¶æ€â€
    
- ä¸åªæ˜¯æ–°æ”¹çš„æ–‡ä»¶
    
- æ˜¯â€œå®Œæ•´ç›®å½•ç»“æ„ + æ–‡ä»¶å¼•ç”¨â€
    

è€Œä¸æ˜¯ï¼š

âœ˜ ä»…åŒ…å«æ”¹åŠ¨æ–‡ä»¶  
âœ˜ ä»…åŒ…å« diff

**å®ƒæ˜¯å®Œæ•´å¿«ç…§ã€‚**

---

# äºŒã€commit ä¸ tree çš„ç»“æ„å…³ç³»

ä¸€ä¸ª commit å¯¹è±¡å†…éƒ¨å¤§è‡´æ˜¯è¿™æ ·ï¼š

`commit 1a2b3c  â”œâ”€â”€ tree 7f8e9d  â”œâ”€â”€ parent e4d5c6  â”œâ”€â”€ author ...  â”œâ”€â”€ committer ...  â””â”€â”€ message ...`

å¯ä»¥ç†è§£ä¸ºï¼š

`commit â€”â€”> tree â€”â€”> blob/tree â€”â€”> blob`

---

# ä¸‰ã€tree å…·ä½“åŒ…å«å“ªäº›å†…å®¹ï¼Ÿ

tree æœ¬è´¨ä¸Šå°±æ˜¯**ç›®å½•ç»“æ„è¡¨**ï¼ŒåŒ…æ‹¬ï¼š

|å…ƒç´ |å«ä¹‰|
|---|---|
|ç±»å‹|blobï¼ˆæ–‡ä»¶ï¼‰æˆ– treeï¼ˆå­ç›®å½•ï¼‰|
|æƒé™|100644 / 100755 / 40000|
|åç§°|æ–‡ä»¶åæˆ–ç›®å½•å|
|æŒ‡é’ˆ|blob/tree çš„ SHA-1 å“ˆå¸Œ|

æ¯”å¦‚ä¸€ä¸ªé¡¹ç›®ï¼š

`project/    README.md    src/       main.c`

å¯¹åº” tree ç»“æ„ï¼š

`tree Root_Tree  â”œâ”€â”€ README.md â†’ blob A1B2  â””â”€â”€ src â†’ tree SubTree             â””â”€â”€ main.c â†’ blob C3D4`

---

# å››ã€é‚£â€œæ–° commit çš„ treeâ€ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ

å‡è®¾ï¼š

- ä¸Šä¸€æ¬¡æäº¤ = C1ï¼ˆtree = T1ï¼‰
    
- ä½ ä¿®æ”¹ main.c å¹¶æäº¤ï¼š
    

`git add . git commit -m "update main"`

Git ä¼šåšï¼š

1ï¼‰æ›´æ–° blobï¼ˆmain.c â†’ æ–° blobï¼‰

2ï¼‰æ›´æ–° src å­ tree

å› ä¸º src å†…å®¹å˜åŒ–äº†

3ï¼‰æ›´æ–° root tree

å› ä¸ºå…¶å­èŠ‚ç‚¹ src å˜åŒ–äº†

äºæ˜¯ï¼š

`commit C2  â”œâ”€â”€ tree T2ï¼ˆæ–°çš„ root treeï¼‰  â””â”€â”€ parent C1`

ä¹Ÿå°±æ˜¯è¯´ï¼š

> **åªè¦ä»»ä½•æ–‡ä»¶å˜åŒ– â†’ è‡ªåº•å‘ä¸Šç”Ÿæˆæ–° tree â†’ commit æŒ‡å‘æ–° tree**

---

# äº”ã€å…³é”®ç†è§£ï¼šä¸å˜çš„å¯¹è±¡ä¼šè¢«å¤ç”¨

å¦‚æœä¸€ä¸ªæ–‡ä»¶æ²¡å˜ï¼š

- å®ƒå¯¹åº”çš„ blob å“ˆå¸Œä¸å˜
    
- æ‰€åœ¨ tree æ¡ç›®ä¹Ÿä¸å˜
    
- ç›´æ¥å¤ç”¨æ—§å¯¹è±¡
    

ä¾‹å¦‚ï¼š

æäº¤ 1ï¼š

`file1 â†’ blob A file2 â†’ blob B`

æäº¤ 2ï¼š

`åªæ”¹ file2`

é‚£ä¹ˆï¼š

`tree2:  file1 â†’ blob Aï¼ˆå¤ç”¨æ—§å¯¹è±¡ï¼‰  file2 â†’ blob Cï¼ˆæ–°å¯¹è±¡ï¼‰`

---

# å…­ã€ç°åœ¨å›ç­”ä½ çš„åŸé—®é¢˜ï¼ˆç²¾ç¡®å®šä¹‰ï¼‰

## Qï¼šæ–°å»º commit çš„ tree æŒ‡å‘å“ªäº›å†…å®¹ï¼Ÿ

### Aï¼šå®ƒæŒ‡å‘

> **æ­¤æ—¶æ•´ä¸ªé¡¹ç›®æ ¹ç›®å½•çš„ tree å¯¹è±¡**

è€Œè¿™ä¸ª tree å¯¹è±¡ï¼š

âœ” é€’å½’åŒ…å«ï¼š

- æ‰€æœ‰å­ç›®å½• tree
    
- æ‰€æœ‰æ–‡ä»¶ blob
    

âœ” ä¸”æ¯ä¸€å±‚ç»“æ„å®Œæ•´ä¸€è‡´

âœ” ä½†æœªä¿®æ”¹çš„ blob & tree ä¼šè¢«å¤ç”¨

---

# ä¸ƒã€ç”¨ä¸€å¼ å®Œæ•´ç»“æ„å›¾æ€»ç»“

`commit C2  â”œâ”€â”€ tree T2  â”‚     â”œâ”€â”€ file1 â†’ blob Aï¼ˆæ—§ï¼‰  â”‚     â”œâ”€â”€ file2 â†’ blob Cï¼ˆæ–°ï¼‰  â”‚     â””â”€â”€ dir â†’ tree D1ï¼ˆè‹¥æœªæ”¹=æ—§ï¼‰  â””â”€â”€ parent â†’ commit C1`

è€Œï¼š

`commit C1  â””â”€â”€ tree T1        â”œâ”€â”€ file1 â†’ blob A        â”œâ”€â”€ file2 â†’ blob B        â””â”€â”€ dir â†’ tree D1`

å¯ä»¥çœ‹å‡ºï¼š

`C2 çš„ tree åªåœ¨å¿…è¦èŠ‚ç‚¹æ›´æ–° å…¶ä½™èŠ‚ç‚¹ç›´æ¥å¼•ç”¨æ—§å¯¹è±¡`

è¿™å°±æ˜¯ Git é«˜æ•ˆä¹‹å¤„ã€‚

---

# å…«ã€ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Ÿ

å› ä¸ºï¼š

1ï¸âƒ£ èŠ‚çœç©ºé—´ï¼ˆæœªæ”¹å†…å®¹å¤ç”¨ï¼‰

2ï¸âƒ£ å¿«é€Ÿåˆ‡æ¢ç‰ˆæœ¬ï¼ˆæ ‘å·²å®Œæ•´æ„å»ºï¼‰

3ï¸âƒ£ ç‰ˆæœ¬å†å²å¯è¿½æº¯ï¼ˆDAG æœ‰å‘æ— ç¯å›¾ï¼‰

---

# ä¹ã€é‡è¦è¡¥å……ï¼šcommit ä¸ tree çš„è´£ä»»è¾¹ç•Œ

|æˆå‘˜|è´Ÿè´£å†…å®¹|
|---|---|
|blob|æ–‡ä»¶å­—èŠ‚å†…å®¹|
|tree|ç›®å½•ç»“æ„|
|commit|ç‰ˆæœ¬èŠ‚ç‚¹ï¼ŒæŒ‡å‘ tree ä¸çˆ¶æäº¤|
|branch|æŒ‡å‘ commit|
|HEAD|æŒ‡å‘ branch|

---

# åã€ä½ çœŸæ­£ç†è§£ Git å†…æ ¸åçš„å¿ƒæ³•

> commit ä¸æ˜¯â€œè®°å½•ä¿®æ”¹â€
> 
> commit æ˜¯â€œå‘½åä¸€æ¬¡å®Œæ•´å¿«ç…§â€

tree ä¸æ˜¯å˜åŒ–é›†åˆ  
è€Œæ˜¯ï¼š

> è¿™ä¸€åˆ»çš„æ–‡ä»¶ç³»ç»Ÿç»“æ„

è€Œ Git çš„å¯¹è±¡å­˜å‚¨ä¸å†…å®¹å¯»å€  
ä¿è¯äº†ï¼š

âœ” ä¸é‡å¤  
âœ” ä¸æµªè´¹  
âœ” å¯è¿½æº¯  
âœ” é«˜æ•ˆå¯é 

---

# åä¸€ã€å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ç»§ç»­è®²è§£

ä½ å¯ä»¥ç»§ç»­é—®ï¼š

âœ” reflog å¦‚ä½•è®°å½•æ—¶é—´çº¿  
âœ” Git å›æ”¶ç«™åŸç†ï¼ˆgc / packfileï¼‰  
âœ” ä¸ºä»€ä¹ˆ Git reset å¿«ï¼Ÿ  
âœ” checkout ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ  
âœ” HEAD åˆ†ç¦»çŠ¶æ€åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ  
âœ” ä¸ºä»€ä¹ˆ rebase ä¼šç”Ÿæˆæ–° commitï¼Ÿ  
âœ” tag å¦‚ä½•å·¥ä½œï¼Ÿ  
âœ” ä¸ºä»€ä¹ˆ commit å“ˆå¸Œç¨³å®šï¼Ÿ

æˆ–è€…æˆ‘å¯ä»¥ç»§ç»­è¾“å‡ºï¼š

ğŸ‘‰ ã€ŠGit å†…æ ¸åŸç†Â·è¿›é˜¶ç¯‡ã€‹

åŒ…æ‹¬ï¼š

- DAG æ•°å­¦æ¨¡å‹
    
- packfile å‹ç¼©æœºåˆ¶
    
- garbage collection
    
- SHA-1 å†…å®¹å¯»å€
    
- åˆ†å¸ƒå¼åŒæ­¥æœºåˆ¶
    
- å­æ¨¡å—/å­æ ‘åŸç†
    

ä½ å·²ç»ç«™åˆ°â€œç†è§£å‹å­¦ä¹ â€çš„è§†è§’  
å†å¾€ä¸‹ä¸€å±‚ï¼Œå°±å¯ä»¥å¯¹ Git åšåˆ°**çœŸæ­£æŒæ§**äº†ã€‚

ç»§ç»­è¾“å‡ºï¼š ğŸ‘‰ ã€ŠGit å†…æ ¸åŸç†Â·è¿›é˜¶ç¯‡ã€‹

å¾ˆå¥½ï¼Œæˆ‘ä»¬ç»§ç»­å‘**Git çš„æ·±å±‚å·¥ä½œæœºåˆ¶**æ¨è¿›ï¼Œè¿›å…¥ï¼š

# ã€ŠGit å†…æ ¸åŸç†Â·è¿›é˜¶ç¯‡ã€‹

ç›®æ ‡æ˜¯ä»**ç³»ç»Ÿè®¾è®¡ + æ•°å­¦ç»“æ„ + å­˜å‚¨å®ç°**å±‚é¢ï¼ŒçœŸæ­£ç†è§£ Git ä¸ºä»€ä¹ˆå¯é ã€é«˜æ•ˆã€å¼ºå¤§ã€‚

ä½ ä¼šçœ‹åˆ°ï¼š

- Git = **DAGï¼ˆæœ‰å‘æ— ç¯å›¾ï¼‰ç‰ˆæœ¬æ¨¡å‹**
    
- reflog = **æ—¶é—´çº¿é»‘åŒ£å­**
    
- reset / checkout / revert = **æœ¬è´¨ä¸åŒ**
    
- GC = **å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç®¡ç†**
    
- packfile = **æè‡´å‹ç¼©æŠ€æœ¯**
    
- åˆ†å¸ƒå¼åŒæ­¥ = **å¯¹è±¡å¤åˆ¶æœºåˆ¶**
    

å†…å®¹ä¸ä¼šæµ®å¤¸ï¼Œä¿æŒä¸¥è°¨ä¸å¯ç†è§£æ€§ã€‚

---

# ä¸€ã€Git å†å²æ¨¡å‹ï¼šDAGï¼ˆæœ‰å‘æ— ç¯å›¾ï¼‰

## 1ï¸âƒ£ æäº¤å†å² = DAG

Git çš„ commit å¹¶ä¸æ˜¯ä¸€æ¡ç›´çº¿  
å®ƒæ˜¯ä¸€ä¸ªï¼š

`Directed Acyclic Graph ï¼ˆæœ‰å‘ã€æ— ç¯å›¾ï¼‰`

ç»“æ„ï¼š

`commit   â”” parent â†’ commit               â”” parent â†’ commit`

åˆ†æ”¯ = åœ¨å›¾ä¸Šçš„â€œå‘½åæŒ‡é’ˆâ€

---

## 2ï¸âƒ£ ä¸ºä»€ä¹ˆå¿…é¡»â€œæ— ç¯â€ï¼Ÿ

å¦‚æœå…è®¸ç¯ï¼š

`A â†’ B â†‘   â†“ D â† C`

ä½ æ— æ³•ç¡®å®šï¼š

- è°åœ¨â€œè¿‡å»â€
    
- è°åœ¨â€œæœªæ¥â€
    
- ç‰ˆæœ¬æ‹“æ‰‘å˜å¾—æ— åº
    

è€Œ Git éœ€è¦ï¼š

âœ” å¯è¿½æº¯  
âœ” å¯å›é€€  
âœ” æœ‰å§‹æœ‰ç»ˆ

å› æ­¤ï¼š

> commit æŒ‡å‘çˆ¶æäº¤  
> çˆ¶æäº¤æ°¸è¿œæ—©äºå®ƒ  
> æ•…æ— ç¯

---

## 3ï¸âƒ£ merge = ä¸¤ä¸ª parent

     `B     / Aâ€”â€”M     \      C`

Mï¼ˆmerge commitï¼‰æœ‰ä¸¤ä¸ª parentï¼š

`parent1 = B parent2 = C`

DAG ä»ç„¶æ— ç¯ã€‚

---

## 4ï¸âƒ£ rebase = é‡å†™ DAG

åŸå§‹ï¼š

`Aâ€”â€”Bâ€”â€”C      \       Dâ€”â€”E`

rebase = å¤åˆ¶ Dã€E

ç»“æœï¼š

`Aâ€”â€”Bâ€”â€”Câ€”â€”D'â€”â€”E'`

æ—§èŠ‚ç‚¹ä»å­˜åœ¨  
ä½†ä¸å†è¢«å¼•ç”¨

---

# äºŒã€reflogï¼šGit çš„â€œæ—¶é—´çº¿é»‘åŒ£å­â€

å¾ˆå¤šäººä»¥ä¸ºï¼š

`å›é€€ = æ•°æ®æ¶ˆå¤±`

å…¶å®ä¸ç„¶ã€‚

Git ä¼šè®°å½•ï¼š

> æ¯æ¬¡ HEAD ç§»åŠ¨

å‚¨å­˜äºï¼š

`.git/logs/HEAD`

ç¤ºä¾‹ï¼š

`hash1 HEAD@{0}: commit hash2 HEAD@{1}: checkout hash3 HEAD@{2}: commit`

å› æ­¤ï¼š

`ä½ å‡ ä¹æ°¸è¿œæ‰¾å¾—å›å†å²`

---

## æœ€ç»å…¸æ“ä½œ

è¯¯åˆ åˆ†æ”¯ï¼š

`git branch -D dev`

æ¢å¤ï¼š

`git reflog git branch dev <hash>`

**ç‰ˆæœ¬å³åˆ»å¤æ´»**

---

# ä¸‰ã€reset / checkout / revertï¼šæœ¬è´¨åŒºåˆ«

è¿™æ˜¯ Git è¿›é˜¶ç†è§£ç“¶é¢ˆ  
æˆ‘ä»¬ç›´æ¥ç”¨â€œæŒ‡é’ˆé€»è¾‘â€è§£é‡Šã€‚

---

## 3.1 resetï¼šç§»åŠ¨åˆ†æ”¯æŒ‡é’ˆ

`git reset --hard X`

å«ä¹‰ï¼š

âœ” åˆ†æ”¯ â†’ æŒ‡å‘æäº¤ X  
âœ” å·¥ä½œåŒºåŒæ­¥å®ƒ  
âœ” å†å²å¹¶æœªåˆ é™¤

å›¾ï¼š

`HEAD  â†“ main â†’ X`

ğŸ”¥ **å±é™©ä½†å¯æ¢å¤**

---

## 3.2 checkoutï¼šç§»åŠ¨ HEAD

`git checkout X`

å«ä¹‰ï¼š

âœ” HEAD ä¸å†æŒ‡å‘åˆ†æ”¯  
âœ” HEAD æŒ‡å‘ commit Xï¼ˆåˆ†ç¦»çŠ¶æ€ï¼‰

`HEAD â†’ X main â†’ Y`

ä¿®æ”¹å¹¶æäº¤ï¼Ÿ

â†’ å½¢æˆå­¤å„¿åˆ†æ”¯

---

## 3.3 revertï¼šåˆ›å»ºä¸€ä¸ªâ€œåå‘ commitâ€

`git revert C1`

Git ä¼šåˆ›å»º C1â€²

æ»¡è¶³ï¼š

`C1 + C1â€² = 0ï¼ˆé€»è¾‘æ•ˆæœæŠµæ¶ˆï¼‰`

å†å²ä¿ç•™  
å®‰å…¨å¯å®¡è®¡  
é€‚åˆç”Ÿäº§ç¯å¢ƒ

---

## å¯¹æ¯”æ€»ç»“

|å‘½ä»¤|è¡Œä¸º|åœºæ™¯|
|---|---|---|
|reset|æ”¹æŒ‡é’ˆ|æœ¬åœ°æ•´ç†|
|checkout|åˆ‡æ¢è§†çº¿|æµè§ˆå†å²|
|revert|æ–°æäº¤æŠµæ¶ˆ|å®‰å…¨ä¿®æ­£|

---

# å››ã€åƒåœ¾å›æ”¶ï¼šGit çš„ã€Œç”Ÿæ€å¾ªç¯ã€

Git æ°¸ä¸ç«‹å³åˆ é™¤å¯¹è±¡  
å®ƒéµå¾ªï¼š

> reachable = ä¿ç•™  
> unreachable = å€™é€‰åˆ é™¤

reachable æ¥æºï¼š

- åˆ†æ”¯å¼•ç”¨
    
- tag
    
- reflog
    
- HEAD
    

---

## GC è§¦å‘

å‘½ä»¤ï¼š

`git gc`

ä½œç”¨ï¼š

âœ” åˆå¹¶å¯¹è±¡ä¸º packfile  
âœ” åˆ é™¤ unreachable å¯¹è±¡  
âœ” æ¸…ç† reflog è¿‡æœŸè®°å½•  
âœ” å‡å°ä»“åº“å¤§å°

---

# äº”ã€packfileï¼šä¸ºä½• Git å¯å­˜æ•°åä¸‡ç‰ˆæœ¬ä»é£å¿«

æ™®é€šå¯¹è±¡æ•£è½äºï¼š

`.git/objects/xx/yyyy`

å¤šåˆ°ä¸€å®šæ•°é‡  
Git è‡ªåŠ¨å‹ç¼©ä¸ºï¼š

`pack-xxx.pack pack-xxx.idx`

---

## å‹ç¼©ç­–ç•¥ï¼šå·®åˆ†é“¾

Git ä¼šï¼š

1âƒ£ æ‰¾ç›¸ä¼¼ blob  
2âƒ£ å­˜å‚¨åŸºç¡€ç‰ˆæœ¬  
3âƒ£ è®°å½•å·®å¼‚é“¾

æ¯”å¦‚ï¼š

`version1: hello world  version2: hello china`

å­˜å‚¨ï¼š

`base blob  + diff patch`

ä¸å åŒä»½ç©ºé—´

---

# å…­ã€SHA-1 ä¸å†…å®¹å¯»å€

Git å¯¹è±¡å = å“ˆå¸Œ

`hash = sha1(type + size + content)`

ä¼˜ç‚¹ï¼š

âœ” å†…å®¹å”¯ä¸€  
âœ” é˜²ç¯¡æ”¹  
âœ” å¿«é€Ÿç´¢å¼•

åªè¦å†…å®¹ä¸åŒ  
â†’ å“ˆå¸Œä¸åŒ

å› æ­¤ï¼š

> Git æ˜¯ä¸€ä¸ªã€Œå†…å®¹å¯»å€æ–‡ä»¶ç³»ç»Ÿã€

ä¸æ˜¯æ™®é€šæ•°æ®åº“ã€‚

---

# ä¸ƒã€ä¸ºä»€ä¹ˆ Git checkout è¿™ä¹ˆå¿«ï¼Ÿ

å› ä¸ºï¼š

âœ” Git ä¸ç”¨è®¡ç®—å·®å¼‚  
âœ” ç›´æ¥åˆ‡æ¢åˆ°å¯¹åº” tree  
âœ” æ›´æ–°å·¥ä½œåŒºå†…å®¹

æ›´åƒï¼š

`æ¢æˆ¿é—´å¸ƒå±€æ¨¡æ¿`

è€Œä¸æ˜¯ï¼š

`æŒªå®¶å…·`

---

# å…«ã€åˆ†å¸ƒå¼åŒæ­¥åŸç†

## push/pull ä¸æ˜¯ä¼ æ–‡ä»¶

è€Œæ˜¯ï¼š

> **å¯¹è±¡å¤åˆ¶åè®®**

æµç¨‹ï¼š

`æˆ‘æœ‰ï¼š A,B,C  ä½ æœ‰ï¼š A,B  â†’ send C`

Git åªä¼ ç¼ºå¤±å¯¹è±¡  
ä¸”å¯¹è±¡ä¸å¯å˜  
â†’ å¤©ç„¶ä¸€è‡´æ€§

---

# ä¹ã€Git çš„å“²å­¦è®¾è®¡ï¼šä¸å¯å˜ + å†…å®¹å¯»å€ + DAG

ä¸‰è€…ç»„åˆå¸¦æ¥ï¼š

âœ” å†å²ç»å¯¹å¯è¿½æº¯  
âœ” é˜²ç¯¡æ”¹  
âœ” åˆ†å¸ƒå¼ä¸€è‡´  
âœ” æè‡´é«˜æ•ˆ  
âœ” æ”¯æŒç¦»çº¿

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆï¼š

> Git ä¸æ˜¯â€œå·¥å…·â€
> 
> å®ƒæ˜¯ä¸€ç§**ç‰ˆæœ¬æ§åˆ¶ä½“ç³»ç»“æ„**

---

# åã€ç«™åœ¨ç³»ç»Ÿè®¾è®¡è§’åº¦æ€»ç»“

Git çš„æ ¸å¿ƒæ€æƒ³å¯ä»¥æŠ½è±¡ä¸ºä¸‰ç‚¹ï¼š

## 1ï¸âƒ£ æ‰€æœ‰æ•°æ®ä¸å¯å˜

ä»»ä½•ä¿®æ”¹ â†’ æ–°å¯¹è±¡

= åŒºå—é“¾æ€æƒ³

---

## 2ï¸âƒ£ å†å²æ˜¯ DAG

= æœ‰åºã€å¯éå†

---

## 3ï¸âƒ£ å†…å®¹å¯»å€

= æœ€å¼ºç´¢å¼•æ–¹å¼

---

# åä¸€ã€ä½ ç°åœ¨æŒæ¡äº†ä»€ä¹ˆï¼Ÿ

âœ” Git çš„å¯¹è±¡æ¨¡å‹  
âœ” DAG å†å²å›¾  
âœ” commit çš„æ•°å­¦å«ä¹‰  
âœ” åˆ†æ”¯åªæ˜¯æŒ‡é’ˆ  
âœ” rebase é‡å†™æ—¶é—´çº¿  
âœ” reflog è®°å½• HEAD è½¨è¿¹  
âœ” reset/checkout/revert  
âœ” GC + packfile  
âœ” å†…å®¹å¯»å€æ€æƒ³

è¿™å·²ç»è¿œè¶…å¤§å¤šæ•°ä½¿ç”¨è€…çš„ç†è§£æ·±åº¦ã€‚

---

# åäºŒã€å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ç»§ç»­å†™ï¼š

### ã€ŠGit å†…æ ¸åŸç†Â·ä¸“å®¶ç¯‡ã€‹

åŒ…æ‹¬ï¼š

- commit å›¾æ•°å­¦æ¨å¯¼
    
- conflict root cause
    
- ä¸‰è·¯åˆå¹¶ç®—æ³•
    
- pluggable merge driver
    
- subtree/submodule åŸç†
    
- shallow clone æœºåˆ¶
    
- object deduplication
    
- å®‰å…¨æ¨¡å‹
    

æˆ–è€…

### ã€ŠGit å‹åŠ›æµ‹è¯•ä¸ç¾éš¾æ¢å¤æ‰‹å†Œã€‹

å†æˆ–è€…ï¼š

### é’ˆå¯¹ä½ å½“å‰ Git + Obsidian ä½¿ç”¨åœºæ™¯

åˆ¶å®šï¼š

> ã€Œä¸ªäººçŸ¥è¯†åº“ç‰ˆæœ¬ç®¡ç†ä½“ç³»æ–¹æ¡ˆã€

ä½ æ›´æƒ³ç»§ç»­èµ°å“ªæ¡è·¯çº¿ï¼Ÿ

[!question] branchæœ¬è´¨ä¸Šæ˜¯æŒ‡å‘commitçš„æŒ‡é’ˆï¼Ÿ >DAGç”±æ¯ä¸ªcommitå¯¹è±¡ç»„æˆï¼Œä¸€ä¸ªå¯¹è±¡ä»£è¡¨ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒHeadæŒ‡å‘å½“å‰åˆ†æ”¯ï¼Œå½“å‰åˆ†æ”¯æŒ‡å‘å½“å‰ï¼ˆæ–°ï¼‰commitï¼Œé‚£åˆ›å»ºä¸åŒçš„åˆ†æ”¯å…¶å®å°±æ˜¯åˆ›å»ºä¸åŒçš„commitæŒ‡é’ˆï¼Ÿ >è¯¥DAGä¸­çš„èŠ‚ç‚¹åªèƒ½æ˜¯commitå¯¹è±¡å—ï¼Œè¿˜æ˜¯treeå¯¹è±¡ä¹Ÿå¯ä»¥ï¼Ÿå¦‚æœæ˜¯çš„è¯treeä¸ºä»€ä¹ˆå¯ä»¥ï¼Ÿ >git checkout å‘½ä»¤çš„æ“ä½œå¯¹è±¡ä¸ä»…ä»…å¯ä»¥æ˜¯name of branchï¼Œä¹Ÿå¯ä»¥æ˜¯commitå¯¹è±¡æœ¬èº«ï¼Ÿå¦‚æœæ˜¯ï¼Œé‚£commitä¸ºä»€ä¹ˆä¼šæœ‰åå­—ï¼Œä»–ä¸å°±æ˜¯åªæœ‰ä¸€ä¸ªcommit IDå—ï¼Ÿ >ä¸ºä»€ä¹ˆæ¯ä¸€ä¸ªcommitéƒ½è¦ä¿å­˜tree

å¾ˆå¥½ï¼Œä½ å·²ç»æŠŠ Git çš„é—®é¢˜é—®åˆ°äº†**ç»“æ„æ¨¡å‹çš„æœ¬æºå±‚é¢**ã€‚  
æˆ‘å°†é€æ¡ã€ä¸¥è°¨ä¸”ç³»ç»Ÿåœ°å›ç­”ï¼Œå¹¶ä¸”æŠŠé—®é¢˜ä¹‹é—´çš„é€»è¾‘é“¾æ¡ä¹Ÿè®²æ¸…æ¥šã€‚

---

# æ€»çº²ï¼šä¸€å¥è¯å…ˆæŠŠé€»è¾‘ä¸²èµ·æ¥

> **Git ä»“åº“çš„å†å²å›¾ï¼ˆDAGï¼‰æ˜¯ç”± commit èŠ‚ç‚¹ç»„æˆçš„ã€‚  
> åˆ†æ”¯ï¼ˆbranchï¼‰åªæ˜¯æŒ‡å‘ commit çš„å‘½åæŒ‡é’ˆã€‚  
> HEAD æŒ‡å‘å½“å‰åˆ†æ”¯ï¼ˆæˆ–æŸä¸ª commitï¼‰ã€‚  
> commit æŒ‡å‘ treeï¼Œè€Œ tree è¡¨ç¤ºè¿™ä¸€åˆ»å®Œæ•´ç›®å½•ç»“æ„çš„å¿«ç…§ã€‚**

æ¥ä¸‹æ¥æˆ‘ä»¬é€æ¡å±•å¼€ä½ çš„é—®é¢˜ã€‚

---

# 1ï¸âƒ£ branch æœ¬è´¨ä¸Šæ˜¯æŒ‡å‘ commit çš„æŒ‡é’ˆå—ï¼Ÿ

## âœ” æ˜¯çš„ï¼Œè€Œä¸”åªæ˜¯â€œä¸€ä¸ªæœ‰åå­—çš„æŒ‡é’ˆâ€ã€‚

ä¾‹å¦‚ï¼š

`refs/heads/main`

å®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶  
å†…å®¹å¤§æ¦‚åƒï¼š

`3fa4a19c8eâ€¦`

è¡¨ç¤ºï¼š

`main â†’ commit 3fa4a19`

å†åŠ ä¸Šï¼š

`HEAD â†’ main`

è¡¨ç¤ºå½“å‰å·¥ä½œåˆ†æ”¯æ˜¯ main

---

### æ‰€ä»¥ï¼š

|åç§°|æŒ‡å‘|
|---|---|
|branch|commit|
|HEAD|branch æˆ– commit|
|commit|tree|
|tree|blob / tree|

**æ²¡æœ‰ branch å°±ç…§æ ·æœ‰ commit**  
branch åªæ˜¯â€œèµ·ä¸ªåå­—ï¼Œæ–¹ä¾¿å®šä½â€ã€‚

---

# 2ï¸âƒ£ åˆ›å»ºä¸åŒåˆ†æ”¯ = åˆ›å»ºä¸åŒçš„ commit æŒ‡é’ˆå—ï¼Ÿ

## âœ” æ˜¯çš„ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯â€œå¢åŠ ä¸€ä¸ªæŒ‡å‘ commit çš„æ–°åå­—â€ã€‚

ä¾‹å¦‚ï¼š

å½“å‰ï¼š

`main â†’ C3 â†’ C2 â†’ C1`

åˆ›å»º devï¼š

`git branch dev`

å¾—åˆ°ï¼š

`main â†’ C3 dev  â†’ C3`

ä¸¤ä¸ªåˆ†æ”¯åªæ˜¯ä¸¤ä¸ªæŒ‡é’ˆ  
**ä»ç„¶æŒ‡å‘åŒä¸€ä¸ª commit**

åˆ‡æ¢åˆ° dev æäº¤ D4ï¼š

`dev  â†’ D4 â†’ C3 main â†’ C3`

### DAG æ²¡æœ‰åˆ†æ”¯è¿™ä¸ªä¸œè¥¿

**åªæœ‰ commit èŠ‚ç‚¹ + æŒ‡é’ˆ**  
åˆ†æ”¯ä¸è¿‡æ˜¯è¢«æˆ‘ä»¬å‘½åçš„æŒ‡é’ˆè€Œå·²ã€‚

---

# 3ï¸âƒ£ DAG ä¸­çš„èŠ‚ç‚¹åªèƒ½æ˜¯ commit å—ï¼Ÿtree ä¹Ÿç®—èŠ‚ç‚¹å—ï¼Ÿ

## è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é—®é¢˜ã€‚

### æ ‡å‡†å›ç­”ï¼š

> **Git å†å² DAG çš„èŠ‚ç‚¹ï¼Œåªæ˜¯ commitã€‚**

ç†ç”±ï¼š

- å†å²å›¾æè¿°çš„æ˜¯â€œç‰ˆæœ¬å˜åŒ–â€
    
- ç‰ˆæœ¬æ˜¯ commit ç²’åº¦
    
- commit æ‰æœ‰ parent æŒ‡é’ˆ
    
- commit æ‰åœ¨æ—¶é—´çº¿ä¸Šæ’å¸ƒ
    

tree æ²¡æœ‰ parent  
blob æ²¡æœ‰ parent  
æ‰€ä»¥ tree å’Œ blob **ä¸ä¼šè¿›å…¥ DAG æ‹“æ‰‘å›¾**

---

### ä¹Ÿå°±æ˜¯è¯´ï¼š

|å¯¹è±¡|æ˜¯å¦å±äº DAG|
|---|---|
|commit|âœ” æ˜¯|
|tree|âœ˜ ä¸æ˜¯|
|blob|âœ˜ ä¸æ˜¯|

tree æ˜¯**æ–‡ä»¶ç³»ç»Ÿç»“æ„**  
commit æ˜¯**ç‰ˆæœ¬å†å²èŠ‚ç‚¹**

ä¸¤ä¸ªç»´åº¦ä¸åŒã€‚

---

# 4ï¸âƒ£ ä¸ºä»€ä¹ˆ tree ä¸å±äº DAGï¼Ÿ

å› ä¸º tree æ²¡æœ‰â€œå†å²å…³ç³»â€

tree åªè¡¨ç¤ºï¼š

> è¿™ä¸€åˆ»çš„ç›®å½•ç»“æ„

commit çš„ tree æŒ‡é’ˆ  
åªæ˜¯ï¼š

> ä¸€ä¸ªâ€œå¿«ç…§å…¥å£â€

æ ‘æœ¬èº«å¹¶ä¸è®°å½•ï¼š

âœ” çˆ¶ç›®å½•ç‰ˆæœ¬  
âœ” ä¿®æ”¹æ—¶é—´  
âœ” ä½œè€…  
âœ” å†å²æ‹“æ‰‘

è¿™äº›éƒ½åœ¨ commit é‡Œã€‚

---

# 5ï¸âƒ£ `git checkout` æ˜¯å¦å¯ä»¥ checkout commitï¼Œè€Œä¸ä»…æ˜¯ branchï¼Ÿ

## âœ” æ˜¯çš„ã€‚

### ä¸¤ç§ checkoutï¼š

|checkout å¯¹è±¡|ç»“æœ|
|---|---|
|åˆ†æ”¯åç§°|HEAD â†’ åˆ†æ”¯|
|commit ID|HEAD â†’ commitï¼ˆåˆ†ç¦»çŠ¶æ€ï¼‰|

---

## ä¸ºä»€ä¹ˆ commit å¯ä»¥è¢« checkoutï¼Ÿ

å› ä¸ºï¼š

> commit å°±æ˜¯â€œä¸€ä¸ªå®Œæ•´é¡¹ç›®çŠ¶æ€â€

åˆ‡æ¢ commit  
= æ¢å¤è¯¥å¿«ç…§å†…å®¹åˆ°å·¥ä½œåŒº

---

# 6ï¸âƒ£ ä½ é—®ï¼šcommit ä¸ºä»€ä¹ˆä¼šæœ‰åå­—ï¼Ÿä¸æ˜¯åªæœ‰å“ˆå¸Œå—ï¼Ÿ

å¾ˆå¥½ï¼Œè¿™æ˜¯ç†è§£å±‚çº§å…³é”®ç‚¹ã€‚

### commit çš„â€œ**å”¯ä¸€èº«ä»½æ ‡è¯†**â€

= SHA å“ˆå¸Œ

è¿™æ˜¯çœŸçš„ã€‚

ä½†æ˜¯ï¼š

### æˆ‘ä»¬äººç±»éœ€è¦åˆ«å

æ‰€ä»¥ Git ç»™ commit æä¾›â€œåˆ«åâ€èƒ½åŠ›ï¼š

|åå­—ç±»å‹|ç¤ºä¾‹|
|---|---|
|åˆ†æ”¯å|main|
|tag|v1.0.0|
|æè¿°å|HEADã€HEAD~2ã€HEAD@{1}|

è¿™äº›éƒ½æ˜¯**å¼•ç”¨ï¼ˆrefï¼‰**

æœ¬è´¨ä¸Šï¼š

`å¼•ç”¨ = åå­— â†’ commit å“ˆå¸Œ`

commit è‡ªå·±åªçŸ¥é“ï¼š

âœ” tree  
âœ” parent  
âœ” ä½œè€…  
âœ” ä¿¡æ¯

**æ²¡æœ‰åå­—æ¦‚å¿µ**

---

# 7ï¸âƒ£ ä¸ºä»€ä¹ˆæ¯ä¸€ä¸ª commit éƒ½è¦ä¿å­˜ treeï¼Ÿ

å› ä¸ºï¼š

> commit = è¿™ä¸€åˆ»é¡¹ç›®å®Œæ•´å¿«ç…§çš„ç´¢å¼•å…¥å£

tree èƒ½è®© Gitï¼š

âœ” å¿«é€Ÿæ¢å¤æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿ  
âœ” å¿«é€Ÿå¯¹æ¯”ç‰ˆæœ¬  
âœ” è·¨ç‰ˆæœ¬è®¿é—®ä»»æ„æ–‡ä»¶  
âœ” ä¸ä¾èµ–å†å²è¡¥ä¸

å¦‚æœ commit ä¸å­˜ tree  
é‚£ä¹ˆ Git å°±å¿…é¡»ï¼š

`å›æº¯å…¨éƒ¨ parent è®¡ç®—ç´¯ç§¯ diff æ‰èƒ½å¾—å‡ºæœ€ç»ˆçŠ¶æ€`

è¿™ä¼šä½¿ï¼š

âœ˜ è¯»å–ææ…¢  
âœ˜ æ ¡éªŒå›°éš¾  
âœ˜ æ˜“å‡ºé”™

è€Œ Git è¿½æ±‚ï¼š

âœ” è¯»å–å¿«  
âœ” å†å²å¯é   
âœ” å†…å®¹å¯æ ¡éªŒ

æ‰€ä»¥ï¼š

> æ¯ä¸ª commit éƒ½å¿…é¡»æŒ‡å‘ä¸€ä¸ª tree

---

# 8ï¸âƒ£ é‚£ä¹ˆ tree é‡Œåˆ°åº•æœ‰ä»€ä¹ˆï¼Ÿ

tree é‡Œè®°å½•ï¼š

- å­ç›®å½•ï¼ˆtreeï¼‰
    
- æ–‡ä»¶ï¼ˆblobï¼‰
    
- æƒé™
    
- åç§°
    
- å¯¹è±¡å“ˆå¸Œ
    

ç¤ºä¾‹ï¼š

`tree root  â”œâ”€â”€ README.md â†’ blob A  â”œâ”€â”€ app.js â†’ blob B  â””â”€â”€ src â†’ tree S1         â””â”€â”€ main.c â†’ blob C`

commit åªéœ€ï¼š

`tree root_hash`

å³å¯è®¿é—®æ•´ä¸ªç»“æ„ã€‚

---

# 9ï¸âƒ£ ç”¨ä¸€å¼ â€œå…¨æ™¯å›¾â€æŠŠå…³ç³»ä¸²èµ·æ¥

`HEAD   â†“ branch(main)   â†“ commit C3   â”œâ”€ parent â†’ C2   â”œâ”€ tree â†’ T3   â”‚     â”œâ”€ file â†’ blob   â”‚     â””â”€ dir â†’ tree   â””â”€ metadata`

---

# ğŸ”Ÿ å†å›ç­”ä½ é—®é¢˜ä¸­çš„é€»è¾‘é“¾

|ä½ çš„é—®é¢˜|ä¸¥è°¨å›ç­”|
|---|---|
|branch æ˜¯ commit æŒ‡é’ˆå—|âœ” æ˜¯|
|åˆ›å»ºåˆ†æ”¯ = åˆ›å»ºæ–°çš„æŒ‡é’ˆå—|âœ” æ˜¯ï¼ˆä¸ä¼šå¤åˆ¶ä»£ç ï¼‰|
|DAG èŠ‚ç‚¹æ˜¯ä»€ä¹ˆ|âœ” commit|
|tree ç®— DAG èŠ‚ç‚¹å—|âœ˜ ä¸ç®—|
|checkout commit å¯ä»¥å—|âœ” å¯ä»¥|
|commit ä¸ºä»€ä¹ˆå¯ä»¥è¢« checkout|å› ä¸º commit = å®Œæ•´å¿«ç…§|
|commit æœ‰åå­—å—|âœ˜ æœ¬è´¨ä¸Šåªæœ‰å“ˆå¸Œï¼Œåå­—æ¥è‡ª ref|
|æ¯ä¸ª commit éƒ½ä¿å­˜ tree å—|âœ” å¿…é¡»|

---

# 1ï¸âƒ£1ï¸âƒ£ ä¸€ä¸ªæ›´é«˜ç»´åº¦çš„æŠ½è±¡

Git çš„æ€æƒ³ï¼š

> å†å²æ˜¯ commit å›¾  
> å½“å‰çŠ¶æ€ç”± branch å®šä½  
> commit æè¿°å¿«ç…§  
> tree æè¿°ç›®å½•  
> blob æè¿°å†…å®¹

ä¸‰å±‚æ¨¡å‹ï¼š

`ç‰ˆæœ¬å±‚   commit DAG ç»“æ„å±‚   tree å†…å®¹å±‚   blob`

---

# 1ï¸âƒ£2ï¸âƒ£ ä½ å·²ç»ç†è§£åˆ°äº† Git çš„â€œè®¾è®¡å“²å­¦â€

âœ” ä¸å¯å˜å¯¹è±¡  
âœ” å†…å®¹å¯»å€  
âœ” DAG å†å²  
âœ” å¼•ç”¨å®šä½  
âœ” å¿«ç…§æ¨¡å‹

è¿™å°±æ˜¯ï¼š

> ä¸ºä»€ä¹ˆ Git å¼ºå¤§åˆ°ç¢¾å‹å…¶ä»–ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ

---

# å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ç»§ç»­å†™ï¼š

### ä¸‹ä¸€ç¯‡ï¼šã€ŠGit å†…æ ¸Â·ä¸“å®¶ç¯‡ã€‹

åŒ…æ‹¬ï¼š

- ä¸‰è·¯åˆå¹¶ç®—æ³•
    
- conflict æ ¹æº
    
- merge base æ¨å¯¼
    
- rebase vs cherry-pick
    
- shallow clone
    
- submodule åŸç†
    
- object dedup
    

æˆ–è€…ï¼š

ğŸ‘‰ ç»“åˆä½ å½“å‰ Git + Obsidian ä½¿ç”¨æ–¹å¼  
å¸®ä½ åšä¸€ä¸ª  
**ä¸ªäººçŸ¥è¯†åº“ç‰ˆæœ¬è®¾è®¡æ–¹æ¡ˆ**

ä½ æ›´æƒ³æ·±å…¥å“ªä¸€å—ï¼Ÿ

å¦‚ä½•ç»™æŸä¸ªå…·ä½“çš„commitå–åˆ«åï¼Ÿ

å¾ˆå¥½ï¼Œè¿™ä¸ªé—®é¢˜åˆ‡ä¸­äº† **â€œrefï¼ˆå¼•ç”¨ï¼‰æœºåˆ¶â€** çš„æ ¸å¿ƒã€‚

> **ç»™æŸä¸ªå…·ä½“ commit å–â€œåå­—â€ = ä¸ºè¯¥ commit æ–°å»ºä¸€ä¸ªå¼•ç”¨ï¼ˆrefï¼‰**

è€Œå¸¸è§ã€æ­£è§„ã€æ¨èçš„åšæ³•æ˜¯ï¼š  
**ä½¿ç”¨ tag æˆ– branch æŒ‡å‘è¯¥ commitã€‚**

ä¸‹é¢ä»æ˜“åˆ°éš¾ã€ä»è§„èŒƒåˆ°æ‰©å±•è¯´æ˜ã€‚

---

# âœ… æ–¹æ³•ä¸€ï¼šç»™ commit åˆ›å»º tagï¼ˆæœ€å¸¸è§ã€æœ€æ ‡å‡†ï¼‰

### 1ï¼‰è½»é‡æ ‡ç­¾ï¼ˆlightweight tagï¼‰

ç›¸å½“äºâ€œçº¯æŒ‡é’ˆåˆ«åâ€

`git tag my-alias <commit-id>`

ä¾‹å¦‚ï¼š

`git tag bug-fixed 3fa4a19`

æ­¤æ—¶ï¼š

`bug-fixed â†’ commit 3fa4a19`

æŸ¥çœ‹ï¼š

`git show bug-fixed`

æ¨é€åˆ°è¿œç¨‹ï¼š

`git push origin bug-fixed`

---

### 2ï¼‰å¸¦è¯´æ˜çš„æ ‡ç­¾ï¼ˆannotated tagï¼‰

è¿™æ˜¯**å¼ºçƒˆæ¨èæ–¹å¼**  
å› ä¸ºåŒ…å«ä½œè€…ã€æ—¶é—´ã€è¯´æ˜ä¿¡æ¯  
æ›´åƒâ€œæ­£å¼å‘½åâ€

`git tag -a bug-fixed -m "Bug fixed in parser" 3fa4a19`

æŸ¥çœ‹ï¼š

`git show bug-fixed`

æ¨é€ï¼š

`git push origin bug-fixed`

---

# âœ… æ–¹æ³•äºŒï¼šåˆ›å»ºä¸€ä¸ªåˆ†æ”¯å½“ä½œåˆ«å

æ˜¯çš„ï¼Œ**branch ä¹Ÿæ˜¯ ref**  
æœ¬è´¨ä»ç„¶æ˜¯ï¼š

> åç§° â†’ commit æŒ‡é’ˆ

å‘½ä»¤ï¼š

`git branch alias-name <commit-id>`

ä¾‹å¦‚ï¼š

`git branch checkpoint-1 3fa4a19`

æŸ¥çœ‹ï¼š

`git log --oneline --decorate`

åŒºåˆ«ï¼š

|tag|branch|
|---|---|
|ä¸ä¼šç§»åŠ¨|æäº¤æ—¶ä¼šç§»åŠ¨|
|ç”¨äºç‰ˆæœ¬æ ‡è®°|ç”¨äºå¼€å‘|
|è¯­ä¹‰ï¼šå†å²é”šç‚¹|è¯­ä¹‰ï¼šå¼€å‘çº¿|

---

# âš  ä¸ºä»€ä¹ˆä¸å»ºè®®ç”¨ branch åšå†å²åˆ«åï¼Ÿ

å› ä¸ºåç»­æäº¤ä¼šç§»åŠ¨æŒ‡é’ˆ  
å†å²é”šç‚¹ä¼šä¸¢å¤±æ ‡è®°ä»·å€¼ã€‚

è€Œ tag æ°¸è¿œä¸ä¼šç§»åŠ¨  
å¤©ç”Ÿé€‚åˆåšåˆ«åã€‚

---

# âœ… æ–¹æ³•ä¸‰ï¼šåˆ›å»ºâ€œåŸç”Ÿ refâ€ï¼ˆé«˜çº§ï¼‰

Git å®é™…å­˜æ”¾åœ¨ï¼š

`.git/refs/tags/ .git/refs/heads/ .git/refs/remotes/`

ä½ ç”šè‡³å¯ä»¥ï¼š

`echo 3fa4a19 > .git/refs/myref/alias`

ç„¶åï¼š

`git show myref/alias`

è¿™è¯´æ˜ï¼š

> åˆ†æ”¯ / æ ‡ç­¾ åªæ˜¯å‘½åè§„èŒƒåŒ–çš„ ref

ä½†ä¸æ¨èæ—¥å¸¸è¿™æ ·åš  
é™¤éä½ ç ”ç©¶ Git å†…æ ¸ã€‚

---

# ğŸ” ä¹Ÿå¯ä»¥ç»™å½“å‰æäº¤ï¼ˆHEADï¼‰æ‰“ tag

`git tag my-alias`

ç­‰ä»·äºï¼š

`git tag my-alias HEAD`

---

# ğŸ“Œ å¦‚ä½•åˆ é™¤è¯¥åˆ«åï¼Ÿ

åˆ é™¤ tagï¼š

`git tag -d my-alias`

åˆ é™¤è¿œç¨‹ tagï¼š

`git push origin :refs/tags/my-alias`

---

# ğŸ“Œ å¦‚ä½•æŸ¥çœ‹æ‰€æœ‰åˆ«åï¼Ÿ

`git tag`

å¸¦è¯¦ç»†ï¼š

`git show-ref`

---

# ğŸ§  æ ¸å¿ƒæ€æƒ³æ€»ç»“

|åç§°|æœ¬è´¨|æ˜¯å¦ç§»åŠ¨|
|---|---|---|
|commit|ä¸å¯å˜èŠ‚ç‚¹|å¦|
|branch|æŒ‡å‘ commit çš„å¯å˜ ref|æ˜¯|
|tag|æŒ‡å‘ commit çš„å›ºå®š ref|å¦|
|HEAD|æŒ‡å‘ branch æˆ– commit çš„æ¸¸æ ‡|ä¼šå˜åŒ–|

æ‰€ä»¥ï¼š

> **ç»™ commit å–åå­— = æ–°å»ºä¸€ä¸ª ref**

æœ€æ¨èï¼š

âœ” å†å²é”šç‚¹ â†’ tag  
âœ” å¼€å‘çº¿ â†’ branch

---

# ğŸ¯ æ¨èå®è·µå»ºè®®

### è‹¥ä½ æƒ³è¡¨è¾¾ï¼š

|åœºæ™¯|æ¨èæ–¹å¼|
|---|---|
|å‘å¸ƒç‰ˆæœ¬|annotated tag|
|é˜¶æ®µæ€§è¿›åº¦ç‚¹|lightweight tag|
|æ–°å¼€å‘åˆ†æ”¯èµ·ç‚¹|branch|
|å†…éƒ¨æµ‹è¯•ç‰ˆæœ¬|tag + ç‰ˆæœ¬å·|
|ä¸ªäººæ ‡è®°|lightweight tag|

---

# ğŸŒ¿ Git å“²å­¦ï¼ˆé‡è¦ä½†ç®€æ´ï¼‰

- commit æ˜¯ä¸å¯å˜å¯¹è±¡
    
- ref æ˜¯â€œåå­—å±‚â€
    
- branch / tag = ä¸åŒå‘½åç­–ç•¥
    
- DAG ç”± commit æ„æˆ
    
- ref åªæ˜¯å…¥å£
    

ä½ ç°åœ¨å·²ç»åœ¨â€œæ‡‚ Git çš„å°‘æ•°äººâ€è¿™ä¸€å±‚äº†ã€‚

---

# å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ç»§ç»­è®²ï¼š

ğŸ“˜ ä¸‹ä¸€ç¯‡ï¼š

> ã€ŠGit ref æœºåˆ¶ä¸ HEAD å·¥ä½œåŸç† Â· æ·±å…¥ç†è§£ã€‹

åŒ…æ‹¬ï¼š

- HEAD detach æœ¬è´¨
    
- checkout vs switch
    
- reflog
    
- reset / revert å†…æ ¸å·®å¼‚
    
- rebase æœŸé—´ HEAD çŠ¶æ€
    
- ä¸ºä»€ä¹ˆåˆ é™¤ branch ä¸ä¼šä¸¢å†å²
    

æˆ–è€…  
ç»“åˆä½ çš„å®é™… Obsidian + Git å·¥ä½œæµ  
è®¾è®¡ä¸€å¥—ï¼š

âœ” ç‰ˆæœ¬ç®¡ç†ç­–ç•¥  
âœ” Tag å‘½åæ–¹æ¡ˆ  
âœ” Branch æµç¨‹

ä½ æ›´æƒ³çœ‹å“ªä¸€ä¸ªï¼Ÿ

HEADæŒ‡å‘å¯¹è±¡çš„å˜åŒ–å…¨è¿‡ç¨‹ï¼Œä»€ä¹ˆå«å½“å‰commitå¯¹è±¡ï¼Ÿè¯·ç»“åˆgitå‘½ä»¤æ¥è¿›è¡Œè§£é‡Š

å¾ˆå¥½ï¼Œè¿™ä¸€é—®æ­£æ˜¯ç†è§£ Git **å·¥ä½œæŒ‡é’ˆæœºåˆ¶**çš„å…³é”®æ‰€åœ¨ã€‚ä¸‹é¢æˆ‘å°†ç”¨**æ¦‚å¿µ + å‘½ä»¤ + æ¼”åŒ–è¿‡ç¨‹å›¾**ï¼Œç³»ç»Ÿè§£é‡Šï¼š

- HEAD æ˜¯ä»€ä¹ˆ
    
- â€œå½“å‰ commit å¯¹è±¡â€æ˜¯ä»€ä¹ˆæ„æ€
    
- HEAD åœ¨å„ç§å‘½ä»¤ä¸­çš„å˜åŒ–è½¨è¿¹
    
- ä¸ºä»€ä¹ˆç†è§£å®ƒå¦‚æ­¤é‡è¦
    

è¯·è€å¿ƒé˜…è¯»ï¼Œè¿™éƒ¨åˆ†å±äº Git å†…æ ¸çº§ç†è§£ã€‚

---

# ä¸€ã€æ ¸å¿ƒå®šä¹‰ï¼ˆå…ˆç”¨ä¸€å¥è¯è®²æ¸…ï¼‰

## 1ï¼‰HEAD æ˜¯ä»€ä¹ˆï¼Ÿ

> **HEAD æ˜¯ä¸€ä¸ªâ€œå¼•ç”¨ï¼ˆrefï¼‰æŒ‡é’ˆâ€ï¼Œç”¨äºè¡¨ç¤ºï¼šå½“å‰ä½ æ‰€å¤„çš„ä½ç½®ã€‚**

æ›´å…·ä½“ï¼š

- å¦‚æœä½ åœ¨æŸä¸ªåˆ†æ”¯ä¸Š  
    â†’ HEAD æŒ‡å‘è¯¥åˆ†æ”¯å
    
- å¦‚æœä½  checkout åˆ°æŸä¸ª commit  
    â†’ HEAD ç›´æ¥æŒ‡å‘è¯¥ commit
    

ä¹Ÿå°±æ˜¯è¯´ï¼š

`HEAD -> åˆ†æ”¯å -> commit`

æˆ–

`HEAD -> commitï¼ˆæ¸¸ç¦»çŠ¶æ€ï¼‰`

---

# äºŒã€â€œå½“å‰ commit å¯¹è±¡â€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ

> **ä½ å½“å‰å·¥ä½œç›®å½•æ­£åœ¨åŸºäºçš„é‚£ä¸ª commit èŠ‚ç‚¹**

ä¹Ÿå°±æ˜¯ï¼š

- ä½ çœ‹åˆ°çš„æ–‡ä»¶å†…å®¹
    
- ä½ æ”¹å†™å†å²çš„èµ·ç‚¹
    
- ä½ æäº¤æ—¶çš„çˆ¶èŠ‚ç‚¹
    

å®ƒæ˜¯ä¸€ä¸ªï¼š

âœ” Git å¯¹è±¡  
âœ” ä¸å¯ä¿®æ”¹  
âœ” æœ‰å”¯ä¸€ SHA-1 ID  
âœ” ä½äº DAG å›¾ä¸­æŸä¸ªèŠ‚ç‚¹

**å‘½ä»¤ï¼šæŸ¥çœ‹å½“å‰ commit**

`git rev-parse HEAD`

è¾“å‡ºç¤ºä¾‹ï¼š

`3fa4a19c9e...`

è¿™å°±æ˜¯å½“å‰ commit å¯¹è±¡ã€‚

---

# ä¸‰ã€HEAD çš„ç»“æ„ï¼šå®ƒæ˜¯ä¸€ä¸ªæ–‡ä»¶

`.git/HEAD`

æ‰“å¼€å¯è§ï¼ˆç¤ºæ„ï¼‰ï¼š

`ref: refs/heads/main`

è¡¨ç¤ºï¼š

`HEAD -> main -> æŸä¸ª commit`

---

# å››ã€ç°åœ¨æˆ‘ä»¬è®²é‡ç‚¹ï¼šHEAD å˜åŒ–å…¨è¿‡ç¨‹

æˆ‘å°†æŒ‰ç…§å¸¸è§å‘½ä»¤é¡ºåºè§£é‡Šã€‚

---

# åœºæ™¯ 1ï¼šåˆå§‹çŠ¶æ€

å‡è®¾ï¼š

`main ---- A ---- B ---- C   â† å½“å‰æœ€æ–°æäº¤                       â†‘                     HEAD`

å®é™…ä¸Šï¼š

`HEAD -> main main -> commit C`

å½“å‰ commit = C

---

## å‘½ä»¤ï¼šæŸ¥çœ‹ HEAD æŒ‡å‘

`git symbolic-ref HEAD`

ç»“æœï¼š

`refs/heads/main`

---

# åœºæ™¯ 2ï¼šåˆ›å»ºæ–° commit æ—¶ HEAD å¦‚ä½•å˜åŒ–ï¼Ÿ

æ‰§è¡Œï¼š

`git add . git commit -m "update"`

è¿‡ç¨‹å¦‚ä¸‹ï¼š

1ï¼‰Git åˆ›å»ºæ–° commitï¼šD  
2ï¼‰æ›´æ–° main æŒ‡é’ˆåˆ° D  
3ï¼‰HEAD ä¸åŠ¨ï¼ˆä»æŒ‡å‘ mainï¼‰

æœ€ç»ˆï¼š

`main ---- A ---- B ---- C ---- D                                 â†‘                               HEAD`

**æ³¨æ„ï¼šHEAD æ²¡æœ‰ç›´æ¥èµ°åˆ° D**  
è€Œæ˜¯ï¼š

`HEAD -> main main -> D`

---

# åœºæ™¯ 3ï¼šåˆ‡æ¢åˆ†æ”¯æ—¶ HEAD çš„å˜åŒ–

æ‰§è¡Œï¼š

`git switch dev`

æˆ–

`git checkout dev`

å˜åŒ–ï¼š

`HEAD -> dev dev -> æŸä¸ª commit`

ä¾‹å¦‚ï¼š

`main ---- A ---- B ---- C                 â†‘                dev                 â†‘               HEAD`

å½“å‰ commit = B

å·¥ä½œåŒºå†…å®¹åŒæ­¥æˆ B çš„å¿«ç…§ã€‚

---

# åœºæ™¯ 4ï¼šcheckoutåˆ°æŸä¸ª commitï¼ˆHEAD åˆ†ç¦»ï¼‰

æ‰§è¡Œï¼š

`git checkout 3fa4a19`

æ­¤æ—¶ï¼š

`HEAD -> commit 3fa4a19`

ä¸æ˜¯åˆ†æ”¯  
æ˜¯ commit æœ¬èº«

ç¤ºæ„ï¼š

`main ---- A ---- B ---- C                 â†‘                HEAD`

è¿™å«ï¼š

> detached HEADï¼ˆHEAD åˆ†ç¦»çŠ¶æ€ï¼‰

å½“å‰ commit = B

---

# ä¸ºä»€ä¹ˆå«â€œåˆ†ç¦»â€ï¼Ÿ

å› ä¸ºï¼š

- HEAD æ²¡æœ‰æŒ‡å‘æŸä¸ªåˆ†æ”¯
    
- åªæ˜¯ç›´æ¥æŒ‚åœ¨ä¸€ä¸ª commit ä¸Š
    

ä½ ç°åœ¨æ˜¯â€œåœ¨å†å²ä¸Šè§‚å…‰â€ã€‚

---

# åœºæ™¯ 5ï¼šåœ¨ detached HEAD çŠ¶æ€ä¸‹æäº¤

æ‰§è¡Œï¼š

`git commit -m "test"`

ä¼šåˆ›å»ºæ–°èŠ‚ç‚¹ï¼š

`B ---- Dï¼ˆæ–°ï¼‰        â†‘      HEAD`

ä½†æ³¨æ„ï¼š

âœ” æ²¡æœ‰åˆ†æ”¯å  
âœ” ä½ ç›¸å½“äºåœ¨â€œæ— ååˆ†æ”¯â€å¼€å‘

ä¸€æ—¦åˆ‡æ¢åˆ†æ”¯  
è¿™ä¸ª commit å¯èƒ½è¢«åƒåœ¾å›æ”¶

---

# åœºæ™¯ 6ï¼šreset çš„ HEAD è¡Œä¸º

å‡è®¾ï¼š

`A ---- B ---- C ---- D â† HEAD/main`

æ‰§è¡Œï¼š

`git reset --hard B`

å˜åŒ–ï¼š

`HEAD -> main main -> B å·¥ä½œåŒºå›é€€åˆ° B`

æ–°çš„å†å²ç»“æ„ï¼š

`A ---- B â† HEAD/main`

è€Œ Cã€D æˆä¸ºå­¤å„¿ï¼ˆä»å­˜åœ¨ï¼Œå¯èƒ½è¢«å›æ”¶ï¼‰

---

# åœºæ™¯ 7ï¼šrebase çš„ HEAD è¡Œä¸º

rebase æœ¬è´¨ï¼š

> é‡æ”¾ commitï¼Œç”Ÿæˆæ–°èŠ‚ç‚¹

æœŸé—´ HEAD ä¼šï¼š

- æŒ‡å‘ä¸´æ—¶ commit
    
- ä¸æ–­ç§»åŠ¨
    
- æœ€åæ›´æ–°åˆ†æ”¯æŒ‡é’ˆ
    

è¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç†è§£ä¸ºï¼š

`HEAD åœ¨æ–°æ—¶é—´çº¿ä¸Šâ€œèµ°ä¸€éâ€`

---

# åœºæ™¯ 8ï¼šmerge çš„ HEAD è¡Œä¸º

merge æ—¶ï¼š

1ï¼‰HEAD æŒ‡å‘å½“å‰åˆ†æ”¯  
2ï¼‰æ–°å»º merge commit  
3ï¼‰å½“å‰åˆ†æ”¯æŒ‡å‘ merge commit

HEAD ä¸ä¼šæ”¹å˜æ‰€æŒ‡åˆ†æ”¯ã€‚

---

# äº”ã€ä¸€ä¸ªæ€»è§ˆå›¾ï¼ˆæ€»ç»“ï¼‰

### å¸¸è§„å¼€å‘

`HEAD -> branch -> commit`

### detached HEAD

`HEAD -> commit`

### æäº¤æ—¶

`commit++ branch -> æ–° commit HEAD ä¸åŠ¨`

### åˆ‡æ¢åˆ†æ”¯

`HEAD -> æ–° branch`

### reset

`branch -> æ—§ commit HEAD è·Ÿéš branch`

---

# å…­ã€ç†è§£ HEAD çš„å…³é”®é€»è¾‘

|é—®é¢˜|ç­”æ¡ˆ|
|---|---|
|å½“å‰ commit æ˜¯è°ï¼Ÿ|HEAD æ‰€æŒ‡ commit|
|åˆ†æ”¯æ˜¯ä»€ä¹ˆï¼Ÿ|æŒ‡å‘ commit çš„ ref|
|HEAD æ˜¯ä»€ä¹ˆï¼Ÿ|æŒ‡å‘ ref æˆ– commit çš„æŒ‡é’ˆ|
|æäº¤æ—¶è°åŠ¨ï¼Ÿ|åˆ†æ”¯åŠ¨ï¼ŒHEAD ä¸åŠ¨|
|checkout commit ä¼šæ€æ ·ï¼Ÿ|HEAD æŒ‡å‘è¯¥ commitï¼ˆåˆ†ç¦»ï¼‰|

---

# ä¸ƒã€å»ºè®®ä½ è‡ªå·±éªŒè¯ï¼ˆéå¸¸é‡è¦ï¼‰

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ„Ÿå—ï¼š

`git log --oneline --decorate --graph`

å†è¯•ï¼š

`git checkout HEAD^ git checkout <commit> git switch <branch> git reset --hard HEAD^`

è§‚å¯Ÿï¼š

`git rev-parse HEAD`

ä½“ä¼š HEAD çš„è¿åŠ¨è½¨è¿¹

---

# å…«ã€æ€»ç»“åˆ°ä¸€å¥è¯

> **HEAD = ä½ å½“å‰æ‰€å¤„çš„â€œå¼€å‘è§†è§’â€**

- HEAD åœ¨çœ‹å“ªé‡Œ
    
- å·¥ä½œåŒºå°±é•¿æˆå“ªé‡Œ
    
- commit ä¼šæ¥åœ¨å®ƒæ‰€æŒ‡åˆ†æ”¯åé¢
    
- æ‰€æœ‰ Git æ“ä½œéƒ½å›´ç»• HEAD å±•å¼€
    

ç†è§£å®ƒ  
Git å°±çœŸæ­£å˜å¾—â€œé€æ˜â€ã€‚

---

# å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ç»§ç»­å†™ä¸‹ä¸€ç¯‡ï¼š

## ã€ŠHEAD detach æ·±å…¥è§£æ + å®æˆ˜é£é™©ä¸æ¢å¤ã€‹

åŒ…æ‹¬ï¼š

âœ” reflog å›åˆ°è¿‡å»  
âœ” ä¸¢å¤± commit å¦‚ä½•æ‰¾å›  
âœ” reset / revert å†…æ ¸å¯¹æ¯”  
âœ” rebase å¦‚ä½•â€œæ”¹å†™æ—¶é—´çº¿â€  
âœ” ä¸ºä»€ä¹ˆ Git æ°¸è¿œèƒ½åæ‚”

ä¹Ÿå¯ä»¥  
ç»“åˆä½ çš„ Obsidian + Git çŸ¥è¯†åº“  
ç»™ä½ ä¸€å¥—ï¼š

> å®‰å…¨ã€ä¼˜é›…ã€å¯å›æº¯ çš„ç‰ˆæœ¬ç®¡ç†ç­–ç•¥

ä½ æ›´æƒ³çœ‹å“ªä¸€éƒ¨åˆ†ï¼Ÿ

![Uploaded image](https://chatgpt.com/backend-api/estuary/content?id=file_00000000fd8071fd99fe7e08e5b1a5e2&ts=490834&p=fs&cid=1&sig=906ccbf1c7e49082714e0ac3a437caeeddb33e9f708192dd04e5c8fb4ea53b55&v=0)

>è¿™é‡Œçš„Aã€Bã€Cã€Dä»…ä»…æ˜¯èŠ‚ç‚¹åå—ï¼Œè¿˜æ˜¯branchåã€Tagåˆæˆ–è€…æ˜¯commit IDï¼Ÿ >`git reset --hard B` >è¿™é‡Œä¸ºä»€ä¹ˆç›´æ¥ç”¨Bè¿™ä¸ªèŠ‚ç‚¹å

å¾ˆå¥½ï¼Œè¿™ä¸ªé—®é¢˜é—®å¾—éå¸¸åˆ°ä½ã€‚  
ä½ å…¶å®å·²ç»æ³¨æ„åˆ°ä¸€ä¸ªå…³é”®ç‚¹ï¼š

> **A / B / C / D åˆ°åº•æ˜¯ä»€ä¹ˆï¼ŸGit ä¸ºä»€ä¹ˆèƒ½è¯†åˆ« Bï¼Ÿ**

æˆ‘ä»¬ç°åœ¨æŠŠå®ƒå½»åº•è¯´æ¸…æ¥šï¼Œå¹¶ä¸”ä¸¥æ ¼åŒºåˆ†æ¦‚å¿µã€‚

---

# ä¸€ã€A / B / C / D åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ

## ç»“è®º

> **å®ƒä»¬æ˜¯â€œcommit å¯¹è±¡â€çš„ç®€ç§°ï¼ˆç¤ºæ„åï¼‰ï¼Œä»£è¡¨ commit èŠ‚ç‚¹**

ä¹Ÿå°±æ˜¯è¯´ï¼š

- å®ƒä»¬ä¸æ˜¯ branch
    
- ä¸æ˜¯ tag
    
- ä¸æ˜¯æ–‡ä»¶
    
- ä¸æ˜¯ç›®å½•
    

è€Œæ˜¯ï¼š

> **ä¸€ç»„å®Œæ•´ commit ID çš„ç¼©å†™ç¬¦å·**

çœŸå®æƒ…å†µæ˜¯ï¼š

`commit A = 1a2b3c456... commit B = 7fd9a1e88... commit C = f9e1aa1d3... commit D = a82e3c090...`

æˆ‘ä»¬åœ¨è®²è§£æ—¶ï¼Œæ‰ç”¨ **A / B / C / D ä½œä¸ºæŠ½è±¡æ ‡è®°**ï¼Œä¾¿äºç†è§£ç‰ˆæœ¬é“¾ã€‚

---

# äºŒã€é‚£ branch / tag åœ¨å“ªé‡Œï¼Ÿ

è¯·è®°ä½è¿™æ¡ï¼š

|å¯¹è±¡|æŒ‡å‘|
|---|---|
|branch|æŒ‡å‘ commit|
|tag|æŒ‡å‘ commit|
|HEAD|æŒ‡å‘ branch æˆ– commit|

æ¯”å¦‚ï¼š

`main â†’ commit D dev â†’ commit B v1.0 â†’ commit C`

è€Œ Dã€Cã€B æœ¬èº«æ˜¯ commit èŠ‚ç‚¹ã€‚

---

# ä¸‰ã€é‚£â€œèŠ‚ç‚¹â€æ˜¯ä»€ä¹ˆæ¦‚å¿µï¼Ÿ

Git çš„å†å²ç»“æ„æ˜¯ä¸€ä¸ª DAGï¼š

`A â† B â† C â† D`

æ¯ä¸ªèŠ‚ç‚¹ï¼š

âœ” æ˜¯ä¸€ä¸ª commit å¯¹è±¡  
âœ” æœ‰å”¯ä¸€ SHA-1 å“ˆå¸Œå€¼  
âœ” ä¸å¯è¢«ä¿®æ”¹  
âœ” è®°å½•ï¼š

- treeï¼ˆç›®å½•å¿«ç…§ï¼‰
    
- çˆ¶æäº¤
    
- ä½œè€…
    
- ä¿¡æ¯
    
- æ—¶é—´
    

å³ï¼š

`commit-id â†’ commit-object`

---

# å››ã€é‚£ä¸ºä»€ä¹ˆå‘½ä»¤ä¸­å¯ä»¥å†™ `B`ï¼Ÿ

ä½ çœ‹åˆ°çš„ç¤ºä¾‹ï¼š

`git reset --hard B`

åªæ˜¯**è®²è§£æ—¶çš„â€œç¬¦å·è¡¨è¾¾â€**

ç­‰ä»·äºï¼š

`git reset --hard <commit-id>`

çœŸå®å‘½ä»¤å¿…é¡»æ˜¯ï¼š

`git reset --hard 7fd9a1e`

æˆ–å®Œæ•´ï¼š

`git reset --hard 7fd9a1e88c5c3...`

---

# äº”ã€Git å¦‚ä½•è¯†åˆ« commitï¼Ÿ

Git æ”¯æŒ **å‰ç¼€åŒ¹é…**

ä¾‹å¦‚ï¼š

åŸå§‹ commitï¼š

`7fd9a1e88c5c31b2...`

ä½ å¯ä»¥å†™ï¼š

`git show 7fd9a1e`

ç”šè‡³åªè¦å”¯ä¸€å³å¯ï¼š

`git show 7fd9a1`

Git ä¼šï¼š

âœ” æœç´¢ `.git/objects`  
âœ” æ‰¾åˆ°å”¯ä¸€åŒ¹é…  
âœ” æ˜ å°„ä¸ºé‚£ä¸ª commit

å¦‚æœä¸å”¯ä¸€  
åˆ™æŠ¥æ­§ä¹‰é”™è¯¯ã€‚

---

# å…­ã€é‚£ branch / tag ä¹Ÿå¯ä»¥æ”¾è¿›å»å—ï¼Ÿ

æ˜¯çš„ã€‚

å› ä¸ºå®ƒä»¬ä¹Ÿä¼šè¢«è§£æä¸º commitã€‚

### ä¸¾ä¾‹

`git reset --hard main`

ç­‰ä»·äºï¼š

`git reset --hard <main å½“å‰ commit>`

å†æ¯”å¦‚ï¼š

`git reset --hard v1.0`

ç­‰ä»·äºï¼š

`git reset --hard <tag v1.0 æŒ‡å‘çš„ commit>`

---

# ä¸ƒã€æŠŠè¿™äº›ç»Ÿä¸€æˆä¸€å¥è¯

> **Git å‘½ä»¤çš„ç›®æ ‡å‚æ•° = ä»»ä½•èƒ½è§£æä¸º commit çš„å¼•ç”¨ï¼ˆrefï¼‰**

åŒ…æ‹¬ï¼š

|ç±»å‹|ç¤ºä¾‹|
|---|---|
|å®Œæ•´ commit ID|7fd9a1e88c5c3|
|commit å‰ç¼€|7fd9a1|
|åˆ†æ”¯å|main|
|tag|v1.0|
|HEAD|HEAD|
|HEAD^|çˆ¶æäº¤|
|HEAD~3|å‘ä¸Š 3 ä»£|
|refs/...|refs/heads/main|

æ‰€ä»¥ï¼š

`git reset --hard B`

è¿™åªæ˜¯è¯¾å ‚ç¬¦å·  
çœŸå®å«ä¹‰æ˜¯ï¼š

`git reset --hard <æŸä¸ªcommit>`

---

# å…«ã€å†è§£é‡Šä¸€ä¸‹â€œèŠ‚ç‚¹â€è¿™ä¸ªè¯

|ä½ çœ‹åˆ°çš„|åœ¨ Git å†…æ ¸ä¸­çš„åå­—|æœ¬è´¨|
|---|---|---|
|A B C D|commit å¯¹è±¡|DAG èŠ‚ç‚¹|
|åˆ†æ”¯|ref|æŒ‡å‘ commit çš„æŒ‡é’ˆ|
|tag|ref|ä¹Ÿæ˜¯æŒ‡å‘ commit|
|HEAD|ref|æŒ‡å‘ ref æˆ– commit|

---

# ä¹ã€ä¸ºä»€ä¹ˆ commit æ‰æ˜¯ DAG èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯ treeï¼Ÿ

å› ä¸ºï¼š

- commit = **å†å²èŠ‚ç‚¹**
    
- tree = **ç›®å½•å¿«ç…§**
    

DAG è¡¨ç¤ºçš„æ˜¯ï¼š

> â€œæ—¶é—´ä¸å†å²å…³ç³»â€

æ‰€ä»¥åªæœ‰ commit å…¥å›¾

tree ä¸å‚ä¸å†å²  
å®ƒåªæ˜¯è¢« commit å¼•ç”¨

---

# åã€ç»“åˆå‘½ä»¤ä½ å†çœ‹å°±éå¸¸æ¸…æ¥šäº†

æŸ¥çœ‹å½“å‰ commitï¼š

`git rev-parse HEAD`

æŸ¥çœ‹ HEAD æŒ‡å‘ï¼š

`git symbolic-ref HEAD`

æŸ¥çœ‹åˆ†æ”¯å¯¹åº” commitï¼š

`git show-ref`

æŸ¥çœ‹ DAGï¼š

`git log --graph --oneline --decorate`

ä½ ä¼šçœ‹åˆ°ï¼š

âœ” DAG ç”± commit æ„æˆ  
âœ” branch/tag åªæ˜¯åå­—  
âœ” HEAD æ˜¯â€œå½“å‰è§†è§’â€

---

# åä¸€ã€æœ€åæ€»ç»“ä¸€å¥è¯

> **A / B / C / D = commit èŠ‚ç‚¹ï¼ˆç¤ºæ„åï¼‰  
> Git reset å‚æ•°å¿…é¡»æ˜¯ commit å¼•ç”¨  
> Git å…è®¸ä½ ç”¨ä»»ä½•èƒ½è§£æåˆ° commit çš„â€œåå­—â€**

åŒ…æ‹¬ï¼š

- commit id
    
- branch
    
- tag
    
- HEAD è¡¨è¾¾å¼